{"version":3,"sources":["app/javascripts/controllers/admin/links/index.js","app/javascripts/controllers/admin/shops/package_sets.js","app/javascripts/controllers/admin/shops/products.js","app/javascripts/controllers/admin/shops/products/skus.js","app/javascripts/controllers/admin/shops/products/variants.js","app/javascripts/controllers/customer/cart/show.js","app/javascripts/controllers/customer/checkout/gateway.js","app/javascripts/controllers/customer/checkout/payment_method.js","app/javascripts/controllers/customer/orders/addresses.js","app/javascripts/controllers/customer/orders/show.js","app/javascripts/controllers/customer/referrer/provision.js","app/javascripts/controllers/guest/feedback.js","app/javascripts/controllers/guest/package_sets.js","app/javascripts/controllers/guest/products/show.js","app/javascripts/controllers/shopkeeper/products/skus.js","app/javascripts/controllers/shopkeeper/products/skus/index.js","app/javascripts/controllers/shopkeeper/products/variants.js","app/javascripts/initialize.js","app/javascripts/lib/casing.js","app/javascripts/lib/content_preloader.js","app/javascripts/lib/foreign/datepicker-de.js","app/javascripts/lib/foreign/datepicker-zh-CN.js","app/javascripts/lib/messages.js","app/javascripts/lib/post_form.js","app/javascripts/lib/preloader.js","app/javascripts/lib/skus.js","app/javascripts/lib/translation.js","app/javascripts/lib/url_process.js","app/javascripts/lib/variants.js","app/javascripts/models.js","app/javascripts/models/cart.js","app/javascripts/models/duty_category.js","app/javascripts/models/link.js","app/javascripts/models/navigation_model.js","app/javascripts/models/order_item.js","app/javascripts/models/order_payment.js","app/javascripts/models/product.js","app/javascripts/models/product_sku.js","app/javascripts/models/translation.js","app/javascripts/services/refresh_total_products.js","app/javascripts/starters.js","app/javascripts/starters/auto_resize.js","app/javascripts/starters/back_to_top.js","app/javascripts/starters/bootstrap.js","app/javascripts/starters/datepicker.js","app/javascripts/starters/distpicker.js","app/javascripts/starters/editable_fields.js","app/javascripts/starters/footer.js","app/javascripts/starters/images_handler.js","app/javascripts/starters/input_validation.js","app/javascripts/starters/lazy_loader.js","app/javascripts/starters/left_menu.js","app/javascripts/starters/links_behaviour.js","app/javascripts/starters/messages.js","app/javascripts/starters/mobile.js","app/javascripts/starters/mobile_menu.js","app/javascripts/starters/navigation.js","app/javascripts/starters/product_favorite.js","app/javascripts/starters/product_form.js","app/javascripts/starters/products_list.js","app/javascripts/starters/qrcode.js","app/javascripts/starters/refresh_time.js","app/javascripts/starters/responsive.js","app/javascripts/starters/search.js","app/javascripts/starters/sku_form.js","app/javascripts/starters/sweet_alert.js","app/javascripts/starters/table_clicker.js","app/javascripts/starters/tooltipster.js","app/javascripts/starters/total_products.js","app/javascripts/starters/weixin.js"],"names":["LinksIndex","init","handleWechatUrl","$","on","e","rawUrl","val","getWechatUrl","url","Link","require","wechat","res","success","endUrl","data","adjusted_url","module","exports","PackageSets","handleSelect","document","ready","each","el","refreshSku","self","productSelector","ProductSku","productId","_","isEmpty","all","skuSelector","parent","find","possibleSkuId","html","skus","forEach","sku","append","id","option_names","nearSkuId","skuId","Products","handleDutyCategoryChange","refreshDutyCategory","selector","DutyCategory","dutyCategoryId","showDutyCategory","datas","duty_category","throwNotFoundDutyCategory","name","ProductsSkus","Skus","setup","ProductsVariants","Variants","RefreshTotalProducts","Messages","Cart","clickChain","chainTiming","orderItemHandleQuantity","removeOrderItem","removePackageSet","handleCouponAutoApply","original_href","attr","target","currentTarget","coupon","value","new_href","getItemData","orderId","orderItemId","orderShopId","originQuantity","parseInt","originTotal","getSelectors","itemData","item","order","removeItem","preventDefault","OrderItem","removeProduct","selectors","remove","order_empty","perform","resetTotalDisplay","makeError","error","increaseQuantity","currentQuantity","orderItemSetQuantity","decreaseQuantity","click","packageSetId","currentTotal","packageSetSetQuantity","setItemLoading","currentClickChain","setTimeout","processQuantity","packageSetQuantity","processPackageSetQuantity","CartModel","setQuantity","rollbackQuantity","resetHeaderCartQuantity","resetDisplay","refreshTotalProducts","setPackageSetQuantity","rollbackPackageSetQuantity","resetPackageDisplay","original_quantity","original_total","orderItemQuantity","order_item","total_price_with_taxes","package_set","total_price","shipping_cost","end_price","total_price_with_discount","total_price_with_extra_costs","discount_display","CustomerGatewayCreate","postBankDetails","setInterval","orderPaymentLiveRefresh","length","OrderPayment","orderPaymentId","show","order_payment","status","window","location","href","Casing","PostForm","bankDetails","dataset","parsedBankDetails","objectToUnderscoreCase","send","CustomerCheckoutPaymentMethod","handleMethodSelection","CustomerCartShow","hide","removeClass","OrdersAddresses","newAddressForm","addClass","scrollToForm","Footer","processStickyFooter","animate","scrollTop","offset","top","OrdersShow","multiSelectSystem","multiselect","enableCaseInsensitiveFiltering","maxHeight","Provision","handleDetailTables","clickDetailTables","GuestFeedback","Preloader","dispatchLoader","Translation","PackageSetsShow","manageAddPackageSet","console","log","addPackageSet","makeSuccess","message","ProductsShow","handleProductGalery","handleSkuChange","handleQuantityChange","handleAddSku","changePrice","option","old_quantity","old_price","unit_price","parseFloat","new_quantity","new_price","toFixed","manageQuantityMinus","manageQuantityPlus","quantity","addSku","image","zoomImage","changeMainImage","trigger","manageClickableImages","size","loader_selector","ContentPreloader","process","change","optionIds","split","skuChangeDisplay","skuHideDiscount","skuShowDiscount","skuDatas","refreshSkuQuantitySelect","refreshSkuSecondDescription","refreshSkuAttachment","refreshSkuThumbnailImages","quantity_select","empty","i","images","fullsize","zoomin","thumb","secondDescription","more","attachment","ProductNewSku","nonSelectedText","nSelectedText","numberDisplayed","onChange","checked","v","next","ProductsShowSkus","routes","info","starters","environment","warn","idx","formatted_starter","underscoreCase","replace","obj","err","meta_obj","controller","action","string","x","y","toLowerCase","camelCase","$1","toUpperCase","parsed","key","new_key","selected_attr","load","before","factory","define","amd","jQuery","datepicker","regional","de","closeText","prevText","nextText","currentText","monthNames","monthNamesShort","dayNames","dayNamesShort","dayNamesMin","weekHeader","dateFormat","firstDay","isRTL","showMonthAfterYear","yearSuffix","setDefaults","shown","activateHide","time","fadeOut","forceHide","params","path","method","form","createElement","setAttribute","hasOwnProperty","f","appendChild","body","submit","element","handleMultiSelect","handleForm","translationSlug","translationScope","findAsync","callback","TranslationModel","translation","UrlProcess","insertParam","encodeURI","kvp","search","substr","join","addOptionHandler","removeOptionHandler","addVariantHandler","removeVariantHandler","container","closest","input_target","Models","total","ajax","done","responseJSON","raw_url","NavigationModel","setLocation","product_id","sku_id","removeOrder","Product","like","unlike","option_ids","Translations","translation_slug","translation_scope","resolveHiding","Starters","AutoResize","setupAutoResize","textareaAutoSize","BackToTop","setupBackToTop","scrollUp","scrollName","scrollDistance","scrollFrom","scrollSpeed","easingType","animation","animationSpeed","scrollTrigger","scrollTarget","scrollText","scrollTitle","scrollImg","activeOverlay","zIndex","Bootstrap","startPopover","startTooltip","popover","tooltip","Datepicker","showDatepicker","language","changeMonth","changeYear","yearRange","Date","getFullYear","Distpicker","distpicker","EditableFields","hideAllEditable","proxy","manageShowEditable","showEditable","hideEditable","stickyFooter","resize","docHeight","footerHeight","footerTop","css","height","headerHeight","first","position","ImagesHandler","elements","validateImageFile","imageLiveRefresh","inputFile","maxExceededMessage","extErrorMessage","allowedExtension","extName","maxFileSize","sizeExceeded","extError","files","pop","inArray","fileElement","event","input","file","reader","FileReader","onload","image_base64","result","image_div","add_link","readAsDataURL","InputValidation","restrictToChinese","setCustomValidity","LazyLoader","startLazyLoader","lazyload","effect","threshold","LeftMenu","startLeftMenu","niceSelect","LinkBehaviour","setupSubmitForm","hideMessages","setupInternational","intlTelInput","nationalMode","preferredCountries","initialCountry","MobileMenu","startMobileMenu","manageFade","Navigation","storeNavigation","ProductFavorite","setupHeartClick","heartElement","onHeartClick","isFavorite","removeFavorite","addFavorite","displayUnlike","modelUnlike","updateTotalFavorites","displayLike","modelLike","favoritesCount","favorites","handleModelResponse","response","ProductForm","manageShopkeeperProductForm","productForm","enableFiltering","ProductsList","manageProductsWall","QrCode","initialized","debounce","onResize","isMobile","destroy","setupWechat","setupWeibo","width","off","hasClass","RefreshTime","refreshTime","displayTime","time_zone","moment","tz","format","remote_time","Responsive","manageCategoriesMenu","slicknav","left_side_content","prepend","Search","categoryFilter","searchInput","statusFilter","showSearchForm","focus","hideSearchForm","category_id","SkuForm","checkbox","setupLimitSystem","resetLimitDisplay","is","switchOffLimit","switchOnLimit","prop","removeAttr","SweetAlert","startAlert","TableClicker","handleTableClicker","onClickTr","link","Tooltipster","activateTooltipster","tooltipster","TotalProducts","WeixinStarter","configure","onReady","onError","wx","config","debug","appId","timestamp","nonceStr","signature","jsApiList"],"mappings":"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","file":"../public/javascripts/app.js","sourcesContent":["/**\n* LinksIndex Class\n*/\nvar LinksIndex = {\n\n  /**\n  * Initializer\n  */\n  init: function() {\n\n    this.handleWechatUrl();\n\n  },\n\n  handleWechatUrl: function() {\n    $('#wechat-url-adjuster').on('keyup', function(e) {\n      let rawUrl = $(this).val();\n      LinksIndex.getWechatUrl(rawUrl);\n    })\n  },\n\n  getWechatUrl: function(url) {\n\n    var Link = require(\"javascripts/models/link\");\n    Link.wechat(url, function(res) {\n\n      if (res.success == true) {\n        let endUrl = res.data.adjusted_url;\n        $('#wechat-url-adjuster-result').val(endUrl);\n      }\n\n    });\n\n  },\n\n}\n\nmodule.exports = LinksIndex;\n","/**\n* PackageSets Class\n*/\nvar PackageSets = {\n\n  /**\n  * Initializer\n  */\n  init: function() {\n\n    this.handleSelect();\n\n  },\n\n  handleSelect: function() {\n\n    $(document).ready(function() {\n      $('select[name*=\"[product_id]\"]').each(function(el) {\n        PackageSets.refreshSku(this);\n      })\n    })\n\n    $('select[name*=\"[product_id]\"]').on('change', function(el) {\n      PackageSets.refreshSku(this);\n    });\n\n  },\n\n  refreshSku: function(self) {\n\n    let productSelector = $(self);\n    let ProductSku = require(\"javascripts/models/product_sku\");\n    let productId = productSelector.val();\n\n    if (_.isEmpty(productId)) {\n      return false;\n    }\n\n    ProductSku.all(productId, function(res) {\n\n      if (res.success == true) {\n\n        let skuSelector = productSelector.parent().parent().find('select[name*=\"[sku_id]\"]');\n        let possibleSkuId = productSelector.parent().parent().find('.js-sku-id');\n\n        skuSelector.html('<option value=\"\">-</option>');\n\n        res.skus.forEach(function(sku) {\n\n          skuSelector.append(\"<option value=\\\"\"+sku.id+\"\\\">\"+sku.option_names+\"</option>\");\n\n          // If we are editing we should setup the pre-selected sku id\n          let nearSkuId = possibleSkuId.data().skuId\n          skuSelector.val(nearSkuId);\n\n\n        });\n\n      }\n\n    });\n\n  },\n\n}\n\nmodule.exports = PackageSets;\n","/**\n * Products Class\n */\nvar Products = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      this.handleDutyCategoryChange();\n\n    },\n\n    /**\n     * We check if the duty category exists through AJAX\n     * and throw it / an error on the display\n     * @return {void}\n     */\n    handleDutyCategoryChange: function() {\n\n      Products.refreshDutyCategory('#duty-category');\n\n      $('#duty-category').on('keyup', function(e) {\n\n        Products.refreshDutyCategory(this);\n\n      });\n\n    },\n\n    refreshDutyCategory: function(selector) {\n\n      var DutyCategory = require(\"javascripts/models/duty_category\");\n      let dutyCategoryId = $(selector).val();\n\n      if ((dutyCategoryId === '') || (typeof dutyCategoryId == \"undefined\")) {\n        return;\n      }\n\n      DutyCategory.find(dutyCategoryId, function(res) {\n\n        if (res.success) {\n          Products.showDutyCategory(res.datas.duty_category);\n        } else {\n          Products.throwNotFoundDutyCategory();\n        }\n\n      });\n\n    },\n\n    showDutyCategory: function(duty_category) {\n\n      $('.js-duty-category').html('<span class=\"+blue\">'+duty_category.name+'</span>');\n\n    },\n\n    throwNotFoundDutyCategory: function() {\n\n      $('.js-duty-category').html('<span class=\"+red\">Duty Category not found</span>');\n\n    },\n\n}\n\nmodule.exports = Products;\n","/**\n * ProductsSkus Class\n */\nvar ProductsSkus = {\n\n  /**\n   * Initializer\n   */\n  init: function() {\n\n    /**\n     * Since the system is cloned on the admin we try\n     * to limit the code duplication by abstracting into a library\n     */\n    let Skus = require(\"javascripts/lib/skus\");\n    Skus.setup();\n\n  },\n\n}\n\nmodule.exports = ProductsSkus;\n","/**\n * ProductsVariants Class\n */\nvar ProductsVariants = {\n\n  /**\n   * Initializer\n   */\n  init: function() {\n\n    /**\n     * Since the system is cloned on the admin we try\n     * to limit the code duplication by abstracting into a library\n     */\n    let Variants = require(\"javascripts/lib/variants\");\n    Variants.setup();\n\n  },\n\n}\n\nmodule.exports = ProductsVariants;\n","var RefreshTotalProducts = require('javascripts/services/refresh_total_products')\nvar Messages = require(\"javascripts/lib/messages\");\n\n/**\n * Cart class\n */\nvar Cart = {\n\n  clickChain: 0, // init click chain system\n  chainTiming: 500, // in ms\n\n  /**\n   * Initializer\n   */\n  init: function() {\n\n    this.orderItemHandleQuantity();\n    this.removeOrderItem();\n    this.removePackageSet();\n    this.handleCouponAutoApply();\n\n  },\n\n  handleCouponAutoApply: function() {\n    var original_href = $('#checkout-button').attr('href');\n    $('#coupon_code').on('keyup', function(e) {\n      let target = e.currentTarget;\n      let coupon = target.value;\n      let new_href = original_href + \"?coupon=\" + coupon;\n      $('#checkout-button').attr('href', new_href);\n    });\n  },\n\n  getItemData: function(el) {\n    return {\n      orderId: $(el).data('orderId'),\n      orderItemId: $(el).data('orderItemId'),\n      orderShopId: $(el).data('orderShopId'),\n      originQuantity: parseInt($('#order-item-quantity-'+$(el).data('orderItemId')).html()),\n      originTotal: $('#order-item-total-'+$(el).data('orderItemId')).attr('data-origin')\n    }\n  },\n\n  getSelectors: function(itemData) {\n    return {\n      item: $('#order-item-' + itemData.orderItemId),\n      order: $('#order-' + itemData.orderId)\n    }\n  },\n\n  removeItem: function(e) {\n    e.preventDefault();\n\n    var OrderItem = require(\"javascripts/models/order_item\");\n    var itemData = Cart.getItemData(this);\n\n    OrderItem.removeProduct(itemData.orderItemId, function(res) {\n\n      let selectors = Cart.getSelectors(itemData);\n\n      if (res.success === true) {\n\n        selectors.item.remove();\n\n        // If the order itself is empty\n        // We remove it as well\n        if (res.order_empty == true){\n          selectors.order.remove();\n        }\n\n        RefreshTotalProducts.perform();\n        Cart.resetTotalDisplay(itemData.orderShopId, res);\n\n      } else {\n\n        Messages.makeError(res.error)\n\n      }\n    });\n  },\n\n  increaseQuantity: function(e) {\n    e.preventDefault();\n    let itemData = Cart.getItemData(this);\n    let currentQuantity = itemData.originQuantity + 1;\n    Cart.clickChain++;\n    Cart.orderItemSetQuantity(itemData, currentQuantity);\n  },\n\n  decreaseQuantity: function(e) {\n    e.preventDefault();\n    let itemData = Cart.getItemData(this);\n    let currentQuantity = itemData.originQuantity;\n    if (itemData.originQuantity > 1) {\n      currentQuantity--;\n    }\n    if (itemData.originQuantity != currentQuantity) {\n      Cart.clickChain++;\n      Cart.orderItemSetQuantity(itemData, currentQuantity);\n    }\n  },\n\n  orderItemHandleQuantity: function() {\n\n    $('.js-set-quantity-minus').on('click', Cart.decreaseQuantity);\n    $('.js-set-quantity-plus').on('click', Cart.increaseQuantity);\n\n\n    $('.js-set-package-quantity-minus').click(function(e) {\n\n      e.preventDefault();\n      Cart.clickChain++;\n\n      let packageSetId = $(this).data('package-set-id');\n      let currentQuantity = $('#package-quantity-'+packageSetId).html();\n      let currentTotal = $('#package-total-'+packageSetId).attr('data-origin');\n      let orderShopId = $(this).data('order-shop-id');\n      let originQuantity = currentQuantity;\n      let originTotal = currentTotal;\n\n      if (currentQuantity > 1) {\n          currentQuantity--;\n      }\n\n      if (originQuantity != currentQuantity) {\n        Cart.clickChain++;\n        Cart.packageSetSetQuantity(packageSetId, originQuantity, originTotal, currentQuantity, orderShopId);\n      }\n\n    });\n\n    $('.js-set-package-quantity-plus').click(function(e) {\n\n      e.preventDefault();\n      Cart.clickChain++;\n\n      let packageSetId = $(this).data('package-set-id');\n      let currentQuantity = $('#package-quantity-'+packageSetId).html();\n      let currentTotal = $('#package-total-'+packageSetId).attr('data-origin');\n      let orderShopId = $(this).data('order-shop-id');\n      let originQuantity = currentQuantity;\n      let originTotal = currentTotal;\n\n      currentQuantity++;\n      Cart.packageSetSetQuantity(packageSetId, originQuantity, originTotal, currentQuantity, orderShopId);\n\n    });\n\n  },\n\n  setItemLoading: function(itemData, currentQuantity) {\n    // We first setup a temporary number before the AJAX callback\n    $('#order-item-quantity-'+itemData.orderItemId).html(currentQuantity);\n    $('#order-item-total-'+itemData.orderItemId).html('-');\n  },\n\n  orderItemSetQuantity: function(itemData, currentQuantity) {\n\n    Cart.setItemLoading(itemData, currentQuantity);\n    var currentClickChain = Cart.clickChain;\n\n    setTimeout(function() {\n      // We basically prevent multiple click by considering only the last click as effective\n      // It won't call the API if we clicked more than once on the + / - within the second\n      if (currentClickChain == Cart.clickChain) {\n        Cart.processQuantity(itemData, currentQuantity);\n      }\n\n    }, Cart.chainTiming);\n\n  },\n\n  packageSetSetQuantity: function(packageSetId, originQuantity, originTotal, packageSetQuantity, orderShopId) {\n\n    // We first setup a temporary number before the AJAX callback\n    $('#package-quantity-'+packageSetId).html(packageSetQuantity);\n    $('#package-total-'+packageSetId).html('-');\n\n    var currentClickChain = Cart.clickChain;\n\n    setTimeout(function()                                                                                   {\n\n        // We basically prevent multiple click by considering only the last click as effective\n        // It won't call the API if we clicked more than once on the + / - within the second\n        if (currentClickChain == Cart.clickChain)                                                           {\n          Cart.processPackageSetQuantity(packageSetId, originQuantity, originTotal, packageSetQuantity, orderShopId);\n        }\n\n      }, Cart.chainTiming);\n\n    },\n\n    removeOrderItem: function () {\n\n        $('.delete-order-item').on('click', Cart.removeItem);\n\n    },\n\n    removePackageSet: function () {\n\n        $('.delete-package-set').on('click', function (e) {\n\n            e.preventDefault();\n\n            // CartModel named this way because of collision because not well abstracted\n            // we should keep refactor this shit.\n            var CartModel = require(\"javascripts/models/cart\");\n            var orderId = $(this).data('order-id');\n            var packageSetId = $(this).data('package-set-id');\n            var orderShopId = $(this).data('order-shop-id');\n\n            CartModel.removePackageSet(packageSetId, orderId, function(res) {\n\n                if (res.success === true) {\n\n                    $('#package-set-' + packageSetId).remove();\n\n                    if (res.order_empty == true){\n                        $('#order-' + orderId).remove();\n                    }\n\n                    RefreshTotalProducts.perform();\n                    Cart.resetTotalDisplay(orderShopId, res);\n\n\n                } else {\n\n                    Messages.makeError(res.error)\n\n                }\n            });\n\n        })\n\n    },\n\n  processQuantity: function(itemData, currentQuantity) {\n\n    var OrderItem = require(\"javascripts/models/order_item\");\n    OrderItem.setQuantity(itemData.orderItemId, currentQuantity, function(res) {\n\n\n\n      if (res.success === false) {\n\n        Cart.rollbackQuantity(itemData.originQuantity, itemData.originTotal, itemData.orderItemId, res);\n        Messages.makeError(res.error);\n\n      } else {\n\n        // We first refresh the value in the HTML\n        Cart.resetHeaderCartQuantity();\n        Cart.resetDisplay(currentQuantity, itemData.orderItemId, itemData.orderShopId, res);\n\n        var refreshTotalProducts = require('javascripts/services/refresh_total_products');\n        refreshTotalProducts.perform();\n\n      }\n\n    });\n\n  },\n\n  processPackageSetQuantity: function(packageSetId, originQuantity, originTotal, packageSetQuantity, orderShopId) {\n\n    var OrderItem = require(\"javascripts/models/order_item\");\n    OrderItem.setPackageSetQuantity(packageSetId, packageSetQuantity, function(res) {\n\n\n\n        if (res.success === false) {\n\n            Cart.rollbackPackageSetQuantity(originQuantity, originTotal, packageSetId, res);\n            Messages.makeError(res.error);\n\n        } else {\n\n            // We first refresh the value in the HTML\n            Cart.resetPackageDisplay(packageSetQuantity, packageSetId, orderShopId, res);\n\n            var refreshTotalProducts = require('javascripts/services/refresh_total_products');\n            refreshTotalProducts.perform();\n\n        }\n\n    });\n\n  },\n\n  resetHeaderCartQuantity: function() {\n\n    /**\n     * NOTE : This system was cancelled because we don't show\n     * the number of product within the cart\n     * - Laurent, 23/01/2017\n     */\n    // var total = 0;\n    //\n    // $('[id^=\"order-item-quantity-\"]').each(function(e) {\n    //   total += parseInt($(this).val());\n    //   $('#total-products').html(total);\n    // })\n\n  },\n\n  rollbackQuantity: function(originQuantity, originTotal, orderItemId, res) {\n\n    // TODO : possible improvement\n    // instead of rolling back completely we could make a system\n    // to try again with different quantity\n\n    // We try to get back the correct value from AJAX if we can\n    // To avoid the system to show a wrong quantity on the display\n    if ((typeof res.original_quantity != \"undefined\") && (typeof res.original_total != \"undefined\")) {\n      originQuantity = res.original_quantity;\n      originTotal = res.original_total;\n    }\n\n    // We rollback the quantity\n    $('#order-item-quantity-'+orderItemId).html(originQuantity);\n    $('#order-item-total-'+orderItemId).html(originTotal);\n\n  },\n\n  rollbackPackageSetQuantity: function(originQuantity, originTotal, packageSetId, res) {\n\n    if ((typeof res.original_quantity != \"undefined\") && (typeof res.original_total != \"undefined\")) {\n        originQuantity = res.original_quantity;\n        originTotal = res.original_total;\n    }\n\n    // We rollback the quantity\n    $('#package-quantity-'+packageSetId).html(originQuantity);\n    $('#package-total-'+packageSetId).html(originTotal);\n\n  },\n\n  resetDisplay: function(orderItemQuantity, orderItemId, orderShopId, res) {\n\n    // Quantity changes\n    $('#order-item-quantity-'+orderItemId).html(orderItemQuantity);\n    $('#order-item-total-'+orderItemId).html(res.data.order_item.total_price_with_taxes);\n    $('#order-item-total-'+orderItemId).attr('data-origin', res.data.order_item.total_price_with_taxes);\n\n    Cart.resetTotalDisplay(orderShopId, res);\n\n  },\n\n  resetPackageDisplay: function(packageSetQuantity, packageSetId, orderShopId, res) {\n\n      // Quantity changes\n      $('#package-quantity-'+packageSetId).html(packageSetQuantity);\n      $('#package-total-'+packageSetId).html(res.data.package_set.total_price);\n      $('#package-total-'+packageSetId).attr('data-origin', res.data.package_set.total_price);\n\n      Cart.resetTotalDisplay(orderShopId, res);\n\n  },\n\n  resetTotalDisplay: function(orderShopId, res) {\n\n    // Total changes\n    $('#order-total-price-with-taxes-'+orderShopId).html(res.data.total_price_with_taxes);\n    $('#order-shipping-cost-'+orderShopId).html(res.data.shipping_cost);\n    $('#order-end-price-'+orderShopId).html(res.data.end_price);\n\n    // Discount management\n    if (typeof res.data.total_price_with_discount != \"undefined\") {\n      $('#order-total-price-with-extra-costs-'+orderShopId).html(res.data.total_price_with_extra_costs);\n      $('#order-total-price-with-discount-'+orderShopId).html(res.data.total_price_with_discount);\n      $('#order-discount-display-'+orderShopId).html(res.data.discount_display);\n    }\n\n  }\n\n}\n\nmodule.exports = Cart;\n","/**\n * CustomerGatewayCreate class\n */\nvar CustomerGatewayCreate = {\n\n  /**\n   * Initializer\n   */\n   init: function() {\n\n    this.postBankDetails();\n\n    // We will check the order payment every once in a while\n    setInterval(this.orderPaymentLiveRefresh, 3000);\n\n  },\n\n  /**\n   * We refresh the page according to the order payment status\n   */\n   orderPaymentLiveRefresh: function() {\n\n     // If it's Wechatpay from Desktop and it needs auto refresh\n     if ($(\"#order-payment-live-refresh\").length > 0) {\n\n       var OrderPayment = require(\"javascripts/models/order_payment\");\n       let orderPaymentId = $('#order-payment-live-refresh').data('order-payment-id');\n\n       OrderPayment.show(orderPaymentId, function(res) {\n\n         if (res.success === true) {\n\n           // We can check the order payment status\n           switch (res.order_payment.status) {\n             case \"scheduled\":\n              break;\n             case \"unverified\":\n              // Unverified means an action has been done but is awaiting approval; it's like a success.\n              window.location.href = $(\"#order-payment-callback-url\").data('success');\n              break;\n            case 'success':\n              window.location.href = $(\"#order-payment-callback-url\").data('success');\n              break;\n            case \"failed\":\n              window.location.href = $(\"#order-payment-callback-url\").data(\"fail\")\n              break;\n            default:\n              break;\n           }\n\n         } else {\n\n           Messages.makeError(res.error);\n\n         }\n       });\n\n\n     }\n\n   },\n\n  /**\n   * Post bank details to the `form_url`\n   */\n   postBankDetails: function() {\n\n    // If it's Wirecard\n    if ($(\"#bank-details\").length > 0) {\n\n      var Casing = require(\"javascripts/lib/casing\");\n      var PostForm = require(\"javascripts/lib/post_form.js\");\n\n      let bankDetails = $(\"#bank-details\")[0].dataset;\n      let parsedBankDetails = Casing.objectToUnderscoreCase(bankDetails);\n\n      PostForm.send(parsedBankDetails, parsedBankDetails['form_url']);\n\n    }\n\n  },\n\n}\n\nmodule.exports = CustomerGatewayCreate;\n","/**\n * CustomerCheckoutPaymentMethod class\n */\nvar CustomerCheckoutPaymentMethod = {\n\n  /**\n   * Initializer\n   */\n   init: function() {\n\n    this.handleMethodSelection();\n    var CustomerCartShow = require(\"javascripts/controllers/customer/cart/show\");\n\n  },\n\n  /**\n   * Will process after someone click to go through the payment gateway (blank page)\n   */\n   handleMethodSelection: function() {\n\n     $('#payment_method_area').find('a').click(function(e) {\n\n       $('#payment_method_area').hide();\n       $('#after_payment_method_area').removeClass('+hidden');\n\n     });\n  },\n\n}\n\nmodule.exports = CustomerCheckoutPaymentMethod;\n","/**\n * OrdersAddresses class\n */\nvar OrdersAddresses = {\n\n  /**\n   * Initializer\n   */\n  init: function() {\n\n    this.newAddressForm();\n\n  },\n\n  /**\n   * When someone clicks on \"enter new address\" a form will show up\n   */\n  newAddressForm: function() {\n\n    $('#button-new-address').on('click', function(e) {\n\n      $('#button-new-address').addClass('+hidden');\n      $('#new-address').removeClass('+hidden');\n\n      OrdersAddresses.scrollToForm();\n\n      // we reset the sticky footer because it makes useless spaces\n      var Footer = require('javascripts/starters/footer');\n      Footer.processStickyFooter();\n\n    });\n\n  },\n\n  scrollToForm: function() {\n    $('html, body').animate({\n        scrollTop: $(\"#new-address\").offset().top\n    }, 500);\n  },\n\n}\n\nmodule.exports = OrdersAddresses;\n","/**\n * OrdersShow class\n */\nvar OrdersShow = {\n\n  /**\n   * Initializer\n   */\n  init: function() {\n\n    this.multiSelectSystem();\n\n  },\n\n  multiSelectSystem: function() {\n\n    $('select.sku-variants-options').multiselect({\n      enableCaseInsensitiveFiltering: true,\n      maxHeight: 400,\n    }).multiselect('disable');\n\n  },\n\n}\n\nmodule.exports = OrdersShow;\n","/**\n * Provision class\n */\nvar Provision = {\n\n  /**\n   * Initializer\n   */\n  init: function() {\n\n    this.handleDetailTables();\n\n  },\n\n  handleDetailTables: function() {\n    $('#click-detail-tables').on('click', this.clickDetailTables);\n  },\n\n  clickDetailTables: function(e) {\n    e.preventDefault();\n    $('#detail-tables').show();\n    $('#click-detail-tables').hide();\n  }\n\n}\n\nmodule.exports = Provision;\n","/**\n * GuestFeedback Class\n */\nvar GuestFeedback = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      var Preloader = require(\"javascripts/lib/preloader\");\n      Preloader.dispatchLoader('#external-script','.js-loader', 'iframe#WJ_survey');\n\n    },\n\n}\n\nmodule.exports = GuestFeedback;\n","var Translation = require(\"javascripts/lib/translation\");\n/**\n * PackageSets Class\n */\nvar PackageSetsShow = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n        this.manageAddPackageSet();\n\n    },\n\n    manageAddPackageSet: function () {\n\n        $('.js-add-package-set').on('click', function (e) {\n\n            e.preventDefault();\n\n            var OrderItem = require(\"javascripts/models/order_item\");\n            let packageSetId = $(this).data('package-set-id');\n            console.log(packageSetId);\n\n            OrderItem.addPackageSet(packageSetId, function(res) {\n\n                var Messages = require(\"javascripts/lib/messages\");\n\n                if (res.success === true) {\n\n                    Messages.makeSuccess(res.message);\n\n                    var refreshTotalProducts = require('javascripts/services/refresh_total_products');\n                    refreshTotalProducts.perform();\n\n                } else {\n\n                    Messages.makeError(res.error)\n\n                }\n            });\n\n        })\n\n    }\n};\n\nmodule.exports = PackageSetsShow;\n","var Translation = require(\"javascripts/lib/translation\");\n/**\n * ProductsShow Class\n */\nvar ProductsShow = {\n\n  /**\n   * Initializer\n   */\n  init: function() {\n\n    this.handleProductGalery();\n    this.handleSkuChange();\n    this.handleQuantityChange();\n    this.handleAddSku();\n\n  },\n\n  /**\n   * Grow or reduce price on the display\n   * @param  {String} [option] `grow` or `reduce` price\n   * @param  {Integer} old_quantity    the original old quantity\n   * @param  {String} selector        the area the HTML had to be changed\n   * @return {void}\n   */\n  changePrice: function(option='grow', old_quantity, selector) {\n\n    if (typeof $(selector) == 'undefined') {\n      return;\n    }\n\n    old_quantity = parseInt(old_quantity);\n    let old_price = $(selector).html();\n    let unit_price = parseFloat(old_price) / parseInt(old_quantity);\n\n    if (option == 'grow') {\n      var new_quantity = old_quantity+1;\n    } else if (option == 'reduce') {\n      var new_quantity = old_quantity-1;\n    }\n\n    let new_price = unit_price * new_quantity;\n    $(selector).html(new_price.toFixed(2));\n\n  },\n\n  /**\n   * Handle the quantity change with different selector (minus or plus)\n   * @return {void}\n   */\n  handleQuantityChange: function() {\n\n    this.manageQuantityMinus();\n    this.manageQuantityPlus();\n\n  },\n\n  /**\n   * Reduce the quantity by clicking on the minus symbol on the page\n   * @return {void}\n   */\n  manageQuantityMinus: function() {\n\n    $('#quantity-minus').on('click', function(e) {\n\n      e.preventDefault();\n      let quantity = $('#quantity').val();;\n\n      if (quantity > 1) {\n\n        ProductsShow.changePrice('reduce', quantity, '#product_discount_with_currency_yuan .amount');\n        ProductsShow.changePrice('reduce', quantity, '#product_discount_with_currency_euro .amount');\n\n        // We show per unit\n        //ProductsShow.changePrice('reduce', quantity, '#product_fees_with_currency_yuan .amount');\n\n        ProductsShow.changePrice('reduce', quantity, '#product_price_with_currency_yuan .amount');\n        ProductsShow.changePrice('reduce', quantity, '#product_price_with_currency_euro .amount');\n        quantity--;\n\n      }\n      $('#quantity').val(quantity);\n    })\n\n  },\n\n  /**\n   * Grow the quantity by clicking on the plus symbol on the page\n   * @return {void}\n   */\n  manageQuantityPlus: function() {\n\n    $('#quantity-plus').on('click', function(e) {\n\n      e.preventDefault();\n      let quantity = $('#quantity').val();\n\n      if (quantity < $('#quantity').data('max')) {\n\n        ProductsShow.changePrice('grow', quantity, '#product_discount_with_currency_yuan .amount');\n        ProductsShow.changePrice('grow', quantity, '#product_discount_with_currency_euro .amount');\n\n        // We show per unit only because it's not growable accurately\n        //ProductsShow.changePrice('grow', quantity, '#product_fees_with_currency_yuan .amount');\n        ProductsShow.changePrice('grow', quantity, '#product_price_with_currency_yuan .amount');\n        ProductsShow.changePrice('grow', quantity, '#product_price_with_currency_euro .amount');\n        quantity++;\n\n      }\n      $('#quantity').val(quantity);\n    })\n\n  },\n\n  /**\n   * Adds the product to the cart when clicking on 'Add Product'\n   * @return {void}\n   */\n\n  handleAddSku: function () {\n\n      $('#js-add-to-cart').on('click', function (e) {\n\n          e.preventDefault();\n\n          var OrderItem = require(\"javascripts/models/order_item\");\n\n          let quantity = $('#quantity').val();\n          let skuId = $('#sku_id').val();\n          let productId = $('#sku_id').data('productId');\n\n          OrderItem.addSku(productId, skuId, quantity, function(res) {\n\n              var Messages = require(\"javascripts/lib/messages\");\n\n              if (res.success === true) {\n\n                  Messages.makeSuccess(res.message);\n\n                  var refreshTotalProducts = require('javascripts/services/refresh_total_products');\n                  refreshTotalProducts.perform();\n\n              } else {\n\n                  Messages.makeError(res.error)\n\n              }\n          });\n\n      })\n\n  },\n\n  /**\n   * Manage the whole gallery selection\n   * @return {void}\n   */\n  handleProductGalery: function() {\n\n    $(document).on('click', '#gallery a', function(e) {\n\n      let image = $(this).data('image');\n      let zoomImage = $(this).data('zoom-image');\n\n      e.preventDefault();\n\n      // Changing the image when we click on any thumbnail of the #gallery\n      // We also manage a small pre-loader in case it's slow.\n      ProductsShow.changeMainImage(image, '.js-loader');\n\n      /*\n      $('#main_image').magnify({\n        speed: 0,\n        src: zoomImage,\n      });*/\n\n    });\n\n    // We don't forget to trigger the click to load the first image\n    $('#gallery a:first').trigger('click');\n\n    // We hide the button because\n    // if there's only one element\n    ProductsShow.manageClickableImages();\n\n  },\n\n  /**\n   * Hide the thumbnail clickables images of the gallery\n   * If not needed (such as one image total)\n   * @return {void}\n   */\n  manageClickableImages: function() {\n\n    if ($('#gallery a').size() <= 1) {\n      $('#gallery a:first').hide();\n    }\n\n  },\n\n  /**\n   * Load a new main image from a thumbanil\n   * @param  {String} image new image source\n   * @param  {String} loader_selector loader to display\n   * @return {void}\n   */\n  changeMainImage: function(image, loader_selector) {\n\n    var ContentPreloader = require(\"javascripts/lib/content_preloader\");\n    ContentPreloader.process($('#main_image').attr('src', image), loader_selector);\n\n  },\n\n  /**\n   * When the customer change of sku selection, it refreshes some datas (e.g. price)\n   */\n  handleSkuChange: function() {\n\n    $('select#option_ids').change(function() {\n\n      var productId = $(this).attr('product_id');\n      var optionIds = $(this).val().split(',');\n\n      var ProductSku = require(\"javascripts/models/product_sku\");\n      var Messages = require(\"javascripts/lib/messages\");\n\n      ProductSku.show(productId, optionIds, function(res) {\n\n        if (res.success === false) {\n\n          Messages.makeError(res.error);\n\n        } else {\n\n          ProductsShow.skuChangeDisplay(productId, res);\n\n        }\n\n      });\n\n    });\n\n  },\n\n  skuHideDiscount: function() {\n\n    $('#product_discount_with_currency_euro').hide();\n    $('#product_discount_with_currency_yuan').hide();\n    $('#product_discount').hide();\n\n    $('#product_discount').removeClass('+discount');\n\n  },\n\n  skuShowDiscount: function() {\n\n    $('#product_discount_with_currency_euro').show();\n    $('#product_discount_with_currency_yuan').show();\n    $('#product_discount').show();\n\n    $('#product_discount').addClass('+discount');\n\n  },\n\n  /**\n   * Change the display of the product page sku datas\n   */\n  skuChangeDisplay: function(productId, skuDatas) {\n\n    ProductsShow.refreshSkuQuantitySelect(productId, skuDatas['quantity']); // productId is useless with the new system (should be refactored)\n\n    $('#product_fees_with_currency_yuan').html(skuDatas['fees_with_currency_yuan']);\n    $('#product_price_with_currency_yuan').html(skuDatas['price_with_currency_yuan']);\n    $('#product_price_with_currency_euro').html(skuDatas['price_with_currency_euro']);\n    $('#quantity-left').html(skuDatas['quantity']);\n\n    $('#quantity').val(1); // we reset the quantity to 1\n\n    if (skuDatas['discount'] == 0) {\n\n      ProductsShow.skuHideDiscount();\n\n    } else {\n\n      ProductsShow.skuShowDiscount();\n\n      $('#product_discount_with_currency_euro').html('<span class=\"+barred\"><span class=\"+dark-grey\">'+skuDatas['price_before_discount_in_euro']+'</span></span>');\n      $('#product_discount_with_currency_yuan').html('<span class=\"+barred\"><span class=\"+black\">'+skuDatas['price_before_discount_in_yuan']+'</span></span>');\n      $('#product_discount').html(skuDatas['discount_with_percent']+'<br/>');\n\n    }\n\n\n    ProductsShow.refreshSkuSecondDescription(skuDatas['data_format']);\n\n    ProductsShow.refreshSkuAttachment(skuDatas['data_format'], skuDatas['file_attachment']);\n    ProductsShow.refreshSkuThumbnailImages(skuDatas['images']);\n\n    ProductsShow.handleProductGalery();\n\n  },\n\n  /**\n   * Refresh sku quantity select (quantity dropdown)\n   */\n  refreshSkuQuantitySelect: function(productId, quantity) {\n\n    var quantity_select = $('#product_quantity_' + productId).empty();\n\n    for (let i=1; i <= parseInt(quantity); ++i) {\n      quantity_select.append('<option value=\"' + i + '\">' + i + '</option>')\n    }\n\n  },\n\n  /**\n   * Refresh sku thumbnail images list\n   */\n  refreshSkuThumbnailImages: function(images) {\n\n      $('#gallery').empty();\n    for (let i = 0; i < images.length; i++) {\n\n      let image = images[i];\n\n      // protection to avoid empty images\n      // in case of transfer bug to the front-end\n      if (image.fullsize != null) {\n\n          $('#gallery').append(\n              '<div id=\"thumbnail-' + i + '\" class=\"col-md-2 col-xs-4 +centered\">' +\n              '<a href=\"#\" data-image=\"'+image.fullsize+'\" data-zoom-image=\"'+image.zoomin+'\"><div class=\"product-page__thumbnail-image\" style=\"background-image:url('+image.thumb+');\"></div></a>' +\n              '</div>'\n          );\n\n      }\n\n    }\n\n  },\n\n  /**\n   * Refresh the sku second description\n   */\n  refreshSkuSecondDescription: function(secondDescription) {\n\n    var more = \"<h3>\"+Translation.find('more', 'title')+\"</h3>\";\n\n    if (typeof secondDescription !== \"undefined\") {\n      $('#product-file-attachment-and-data').html(more+secondDescription);\n    } else {\n      $('#product-file-attachment-and-data').html('');\n    }\n\n  },\n\n  /**\n   * Refresh the sku attachment (depending on second description too)\n   */\n  refreshSkuAttachment: function(secondDescription, attachment) {\n\n    var more = \"<h3>\"+Translation.find('more', 'title')+\"</h3>\";\n\n    if (typeof attachment !== \"undefined\") {\n      if (typeof secondDescription !== \"undefined\") {\n        $('#product-file-attachment-and-data').html(more+secondDescription);\n      }\n      $('#product-file-attachment-and-data').append('<br /><a class=\"btn btn-default\" target=\"_blank\" href=\"'+attachment+'\">PDF Documentation</a>');\n    }\n\n  },\n\n}\n\nmodule.exports = ProductsShow;\n","var Translation = require('javascripts/lib/translation');\n\n/**\n * ProductNewSku Class\n */\nvar ProductNewSku = {\n\n  /**\n   * Initializer\n   */\n  init: function() {\n\n    /**\n     * TODO: THIS SEEMS TO BE HIGHLY DEPRECATED BUT WE SHOULD MAKE SURE IT IS BEFORZ TO REMOVE\n     */\n\n    $('select.sku-variants-options').multiselect({\n      nonSelectedText: Translation.find('non_selected_text', 'multiselect'),\n      nSelectedText: Translation.find('n_selected_text', 'multiselect'),\n      numberDisplayed: 3,\n      maxHeight: 400,\n      onChange: function(option, checked) {\n        let v = $('.sku-variants-options')\n        if ( v.val() ) {\n          v.next().removeClass('invalidBorderClass')\n        } else {\n          v.next().addClass('invalidBorderClass')\n        }\n      }\n    });\n\n    $('#edit_product_detail_form_btn').click( function() {\n      let v = $('select.sku-variants-options');\n\n      if ( v.val() == null ) {\n        v.next().addClass('invalidBorderClass');\n        return false;\n      }\n\n      if ( $('img.img-responsive[src=\"\"]').length >= 4) {\n        $('.fileUpload:first').addClass('invalidBorderClass');\n        return false;\n      }\n\n      $('input.img-file-upload').click( function() {\n        if ( $('img.img-responsive[src=\"\"]').length > 0) {\n          $('.fileUpload').removeClass('invalidBorderClass');\n        }\n      });\n\n      return true;\n    });\n\n  },\n\n}\n\nmodule.exports = ProductNewSku;\n","var Translation = require('javascripts/lib/translation');\n\n/**\n * ProductsShowSkus Class\n */\nvar ProductsShowSkus = {\n\n  /**\n   * Initializer\n   */\n  init: function() {\n\n    if ($('select.sku-variants-options').length > 0) {\n\n      $('select.sku-variants-options').multiselect({\n        nonSelectedText: Translation.find('non_selected_text', 'multiselect'),\n        nSelectedText: Translation.find('n_selected_text', 'multiselect'),\n        numberDisplayed: 3,\n        maxHeight: 400\n      }).multiselect('disable');\n\n    }\n\n  },\n\n}\n\nmodule.exports = ProductsShowSkus;\n","/**\n * ProductsVariants Class\n */\nvar ProductsVariants = {\n\n  /**\n   * Initializer\n   */\n  init: function() {\n\n    /**\n     * Since the system is cloned on the admin we try\n     * to limit the code duplication by abstracting into a library\n     */\n    let Variants = require(\"javascripts/lib/variants\");\n    Variants.setup();\n\n  },\n\n}\n\nmodule.exports = ProductsVariants;\n","$(document).ready(() => {\n\n  /**\n   * Controllers loader by Loschcode\n   * Damn simple class loader.\n   */\n  let routes = $(\"#js-routes\").data();\n  let info = $(\"#js-info\").data();\n  let starters = require(\"javascripts/starters\");\n\n  /**\n   * Disable console.log for production and tests (poltergeist)\n   */\n   if ((info.environment == \"production\") || (info.environment == \"test\")) { // || (info.environment == \"test\")\n     if (typeof(window.console) != \"undefined\") {\n       window.console = {};\n       window.console.log = function () {};\n       window.console.info = function () {};\n       window.console.warn = function () {};\n       window.console.error = function () {};\n     }\n   }\n\n  try {\n\n    var Casing = require(\"javascripts/lib/casing\");\n\n    for (var idx in starters) {\n\n      if (info.environment != \"test\") {\n        console.info('Loading starter : ' + starters[idx]);\n      }\n\n      let formatted_starter = Casing.underscoreCase(starters[idx]).replace('-', '_');\n      let obj = require(\"javascripts/starters/\"+formatted_starter);\n      obj.init();\n\n    }\n\n  } catch(err) {\n\n    console.error(\"Unable to initialize #js-starters (\"+err+\")\");\n    return;\n\n  }\n\n  try {\n    var meta_obj = require(\"javascripts/controllers/\"+routes.controller);\n    console.info(\"Loading controller \"+routes.controller);\n    meta_obj.init();\n  } catch(err) {\n    console.warn(\"Unable to initialize #js-routes `\"+routes.controller+\"` (\"+err+\")\");\n  }\n\n  try {\n    var obj = require(\"javascripts/controllers/\"+routes.controller+\"/\"+routes.action);\n    console.info(\"Loading controller-action \"+routes.controller+\"/\"+routes.action);\n  } catch(err) {\n    console.warn(\"Unable to initialize #js-routes `\"+routes.controller+\"`.`\"+routes.action+\"` (\"+err+\")\");\n    return;\n  }\n\n  /**\n   * Initialization\n   */\n  obj.init();\n\n});\n","/**\n * Casing Class\n */\nvar Casing = {\n\n    /**\n     * CamelCase to underscored case\n     */\n    underscoreCase: function(string) {\n     return string.replace(/(?:^|\\.?)([A-Z])/g, function (x,y){return \"_\" + y.toLowerCase()}).replace(/^_/, \"\").replace('-', '_');\n    },\n\n    /**\n     * Undescored to CamelCase\n     */\n    camelCase: function(string) {\n      return string.replace(/(\\-[a-z])/g, function($1){return $1.toUpperCase().replace('-','');});\n    },\n\n    /**\n     * Convert an object to underscore case\n     */\n    objectToUnderscoreCase: function(obj) {\n\n      var parsed = {};\n      for (var key in obj) {\n\n        let new_key = this.underscoreCase(key);\n        parsed[new_key] = obj[key];\n\n      }\n\n      return parsed\n\n    },\n\n}\n\nmodule.exports = Casing;\n","/**\n * ContentPreloader Class\n */\nvar ContentPreloader = {\n\n  /**\n   * Preload some content inside the system\n   * @param  {String} image new image source\n   * @param  {String} loader_selector loader to display\n   * @return {void}\n   */\n  process: function(selected_attr, loader_selector) {\n\n    selected_attr.load(function() {\n      $(loader_selector).hide();\n      $(this).show();\n    }).before(function() {\n      $(loader_selector).show();\n      $(this).hide();\n    });\n\n  },\n\n}\n\nmodule.exports = ContentPreloader;\n","/* German initialisation for the jQuery UI date picker plugin. */\n/* Written by Milian Wolff (mail@milianw.de). */\n( function( factory ) {\n  if ( typeof define === \"function\" && define.amd ) {\n\n    // AMD. Register as an anonymous module.\n    define( [ \"../widgets/datepicker\" ], factory );\n  } else {\n\n    // Browser globals\n    factory( jQuery.datepicker );\n  }\n}( function( datepicker ) {\n\ndatepicker.regional.de = {\n  closeText: \"Schließen\",\n  prevText: \"&#x3C;Zurück\",\n  nextText: \"Vor&#x3E;\",\n  currentText: \"Heute\",\n  monthNames: [ \"Januar\",\"Februar\",\"März\",\"April\",\"Mai\",\"Juni\",\n  \"Juli\",\"August\",\"September\",\"Oktober\",\"November\",\"Dezember\" ],\n  monthNamesShort: [ \"Jan\",\"Feb\",\"Mär\",\"Apr\",\"Mai\",\"Jun\",\n  \"Jul\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Dez\" ],\n  dayNames: [ \"Sonntag\",\"Montag\",\"Dienstag\",\"Mittwoch\",\"Donnerstag\",\"Freitag\",\"Samstag\" ],\n  dayNamesShort: [ \"So\",\"Mo\",\"Di\",\"Mi\",\"Do\",\"Fr\",\"Sa\" ],\n  dayNamesMin: [ \"So\",\"Mo\",\"Di\",\"Mi\",\"Do\",\"Fr\",\"Sa\" ],\n  weekHeader: \"KW\",\n  dateFormat: \"dd.mm.yy\",\n  firstDay: 1,\n  isRTL: false,\n  showMonthAfterYear: false,\n  yearSuffix: \"\" };\ndatepicker.setDefaults( datepicker.regional.de );\n\nreturn datepicker.regional.de;\n\n} ) );","/* Chinese initialisation for the jQuery UI date picker plugin. */\n/* Written by Cloudream (cloudream@gmail.com). */\n( function( factory ) {\n  if ( typeof define === \"function\" && define.amd ) {\n\n    // AMD. Register as an anonymous module.\n    define( [ \"../widgets/datepicker\" ], factory );\n  } else {\n\n    // Browser globals\n    factory( jQuery.datepicker );\n  }\n}( function( datepicker ) {\n\ndatepicker.regional[ 'zh-CN' ] = {\n  closeText: \"关闭\",\n  prevText: \"&#x3C;上月\",\n  nextText: \"下月&#x3E;\",\n  currentText: \"今天\",\n  monthNames: [ \"一月\",\"二月\",\"三月\",\"四月\",\"五月\",\"六月\",\n  \"七月\",\"八月\",\"九月\",\"十月\",\"十一月\",\"十二月\" ],\n  monthNamesShort: [ \"一月\",\"二月\",\"三月\",\"四月\",\"五月\",\"六月\",\n  \"七月\",\"八月\",\"九月\",\"十月\",\"十一月\",\"十二月\" ],\n  dayNames: [ \"星期日\",\"星期一\",\"星期二\",\"星期三\",\"星期四\",\"星期五\",\"星期六\" ],\n  dayNamesShort: [ \"周日\",\"周一\",\"周二\",\"周三\",\"周四\",\"周五\",\"周六\" ],\n  dayNamesMin: [ \"日\",\"一\",\"二\",\"三\",\"四\",\"五\",\"六\" ],\n  weekHeader: \"周\",\n  dateFormat: \"yy-mm-dd\",\n  firstDay: 1,\n  isRTL: false,\n  showMonthAfterYear: true,\n  yearSuffix: \"年\" };\ndatepicker.setDefaults( datepicker.regional[ 'zh-CN' ] );\n\nreturn datepicker.regional[ 'zh-CN' ];\n\n} ) );","/**\n * Messages Class\n */\nvar Messages = {\n\n    shown: false,\n\n    makeError: function(error) {\n\n      $('#message-container-error').show();\n      $(\"#message-content-error\").html(error);\n      Messages.activateHide('#message-container-error', 3000);\n      Messages.shown = true;\n\n    },\n\n    makeSuccess: function(success) {\n\n      $('#message-container-success').show();\n      $(\"#message-content-success\").html(success);\n      Messages.activateHide('#message-container-success', 4000);\n      Messages.shown = true;\n\n    },\n\n    /**\n     * Everything below is called from the starter messages.js\n     */\n\n    activateHide: function(el, time) {\n\n      setTimeout(function(){\n          $(el).fadeOut(function() {\n            $(document).trigger('message:hidden');\n            Messages.shown = false;\n          });\n      }, time);\n\n    },\n\n    forceHide: function(el) {\n      $('#message-area').on('click', function() {\n        $(el).hide();\n      })\n    },\n\n}\n\nmodule.exports = Messages;\n","/**\n * PostForm Class\n */\nvar PostForm = {\n\n    /**\n     * Generate and create a form\n     */\n    send: function(params, path, target, method) {\n\n      var method = method || \"POST\";\n      var path = path || \"\";\n      var target = target || \"\";\n\n      var form = document.createElement(\"form\");\n      form.setAttribute(\"method\", method);\n      form.setAttribute(\"action\", path);\n      form.setAttribute(\"target\", target);\n\n      for (var key in params) {\n\n        if (params.hasOwnProperty(key))  {\n\n          var f = document.createElement(\"input\");\n          f.setAttribute(\"type\", \"hidden\");\n          f.setAttribute(\"name\", key);\n          f.setAttribute(\"value\", params[key]);\n          form.appendChild(f);\n\n        }\n\n      }\n\n      document.body.appendChild(form); // <- JS way\n      // $('body').append(form); // <- jQuery way\n      //console.log(form);\n      form.submit();\n\n    }\n\n}\n\nmodule.exports = PostForm;\n","/**\n* Preloader Class\n*/\nvar Preloader = {\n\n  /**\n  * Check an element and hide it until the trigger is loaded itself\n  * Show a loder `.js-loader` if possible\n  */\n  dispatchLoader: function(element, loader_selector, trigger) {\n\n    $(loader_selector).show();\n    $(element).hide();\n\n    $(trigger).load(function() {\n      $(loader_selector).hide();\n      $(element).show();\n    })\n\n  },\n\n}\n\nmodule.exports = Preloader;\n","/**\n * Skus Class\n */\nvar Skus = {\n\n  setup: function() {\n\n    this.handleMultiSelect();\n    this.handleForm();\n\n  },\n\n  /**\n   * We turn the multi-select of the sku dashboard management into a readable checkbox select\n   * @return {void}\n   */\n  handleMultiSelect: function() {\n\n    var Translation = require('javascripts/lib/translation');\n\n    $('select.sku-variants-options').multiselect({\n      nonSelectedText: Translation.find('non_selected_text', 'multiselect'),\n      nSelectedText: Translation.find('n_selected_text', 'multiselect'),\n      numberDisplayed: 3,\n      maxHeight: 400,\n      onChange: function(option, checked) {\n        let v = $('.sku-variants-options')\n        if ( v.val() ) {\n          v.next().removeClass('invalidBorderClass')\n        } else {\n          v.next().addClass('invalidBorderClass')\n        }\n      }\n    });\n\n  },\n\n  /**\n   * This seems to handle the images warning on the skus form for shopkeeper and admin\n   * NOTE : i didn't refactor this, it should be made cleaner and check the use.\n   */\n  handleForm: function() {\n\n    $('#edit_product_detail_form_btn').click( function() {\n      let v = $('select.sku-variants-options');\n\n      if ( v.val() == null ) {\n        v.next().addClass('invalidBorderClass');\n        return false;\n      }\n\n      if ( $('img.img-responsive[src=\"\"]').length >= 4) {\n        $('.fileUpload:first').addClass('invalidBorderClass');\n        return false;\n      }\n\n      $('input.img-file-upload').click( function() {\n        if ( $('img.img-responsive[src=\"\"]').length > 0) {\n          $('.fileUpload').removeClass('invalidBorderClass');\n        }\n      });\n\n      return true;\n    });\n\n  },\n\n\n}\n\nmodule.exports = Skus;\n","/**\n * Translation Class\n */\n var Translation = {\n\n   find: function(translationSlug, translationScope) {\n\n     var selector = \".js-translation[data-slug='\"+translationSlug+\"'][data-scope='\"+translationScope+\"']\";\n     if ($(selector).length > 0) {\n       return $(selector).data('content');\n     } else {\n       console.error(\"Translation not found : `\"+translationScope+\"`.`\"+translationSlug+\"`\");\n       return '';\n     }\n\n   },\n\n   /**\n   * Find a translation and return the string from AJAX with callbacks\n   */\n   findAsync: function(translationSlug, translationScope, callback) {\n\n     var TranslationModel = require(\"javascripts/models/translation\");\n\n     TranslationModel.show(translationSlug, translationScope, function(res) {\n\n       if (res.success === false) {\n         console.error(\"Translation not found `\"+translationSlug+\"` (\"+res.error+\")\");\n       } else {\n         callback(res.translation);\n       }\n\n     });\n   },\n\n }\n\nmodule.exports = Translation;\n","/**\n * UrlProcess Class\n */\nvar UrlProcess = {\n\n  insertParam: function(key, value) {\n\n      key = encodeURI(key); value = encodeURI(value);\n\n      var kvp = document.location.search.substr(1).split('&');\n\n      var i=kvp.length; var x; while(i--)\n      {\n          x = kvp[i].split('=');\n\n          if (x[0]==key)\n          {\n              x[1] = value;\n              kvp[i] = x.join('=');\n              break;\n          }\n      }\n\n      if(i<0) {kvp[kvp.length] = [key,value].join('=');}\n\n      //this will reload the page, it's likely better to store this until finished\n      document.location.search = kvp.join('&');\n  }\n\n\n}\n\nmodule.exports = UrlProcess;\n","/**\n * Variants Class\n */\nvar Variants = {\n\n  setup: function() {\n\n    this.addOptionHandler();\n    this.removeOptionHandler();\n\n    this.addVariantHandler();\n    this.removeVariantHandler();\n\n  },\n\n  addVariantHandler: function() {\n\n    $('#add-variant').on('click', function(e) {\n\n      e.preventDefault();\n      let target = $('.js-temporary-variant.hidden:first');\n      console.log(target);\n      target.removeClass('hidden');\n\n    })\n\n  },\n\n  removeVariantHandler: function() {\n\n    $('.js-remove-variant').on('click', function(e) {\n\n      e.preventDefault();\n      let container = $(this).closest('.js-temporary-variant');\n      let input_target = container.find('input');\n      input_target.val('');\n      container.addClass('hidden');\n\n    });\n\n  },\n\n  /**\n   * We add an option (aka suboption in some cases) to the variant\n   * It will just show a field which was previously hidden\n   * NOTE : everything is managed by rails itself beforehand\n   * to make it flexible in the front-end side\n   */\n  addOptionHandler: function() {\n\n    $('.js-add-option').on('click', function(e) {\n\n      e.preventDefault();\n      let target = $(this).closest('.variant-box').find('.js-temporary-option.hidden:first');\n      target.removeClass('hidden');\n\n    })\n\n  },\n\n  /**\n   * Set the value of the field to empty\n   * and hide it from the display\n   */\n  removeOptionHandler: function() {\n\n    $('.js-remove-option').on('click', function(e) {\n\n      e.preventDefault();\n      let container = $(this).closest('.js-temporary-option');\n      let input_target = container.find('input');\n      input_target.val('');\n      container.addClass('hidden');\n\n    });\n\n  }\n\n}\n\nmodule.exports = Variants;\n","/**\n * Models Class\n */\nvar Models = [\n\n  // Not currently in use (please load each model on a case per case basis)\n  //\n]\n\nmodule.exports = Models;\n","/**\n * Cart Class\n */\nvar Cart = {\n\n  /**\n   * Get the total number of products within the cart\n   */\n  total: function(callback) {\n\n    // NOTE : condition race made it impossible to build\n    // I passed 2 full days on this problem\n    // Good luck.\n    // - Laurent\n    $.ajax({\n      method: \"GET\",\n      url: \"/api/guest/cart/total\",\n      data: {}\n\n    }).done(function(res) {\n\n      callback(res);\n\n    }).error(function(err) {\n\n      if (typeof err == \"undefined\") {\n        return;\n      }\n\n      callback({success: false, error: err.responseJSON.error});\n\n    });\n\n  },\n\n  removePackageSet: function(packageSetId, orderId, callback) {\n\n      $.ajax({\n          method: \"DELETE\",\n          url: \"/api/guest/package_sets/\" + packageSetId,\n          data: {}\n\n      }).done(function(res) {\n\n          callback(res);\n\n      }).error(function(err) {\n\n        if (typeof err == \"undefined\") {\n          return;\n        }\n\n        callback({success: false, error: err.responseJSON.error});\n\n      });\n\n  }\n\n};\n\nmodule.exports = Cart;\n","/**\n * Duty Category Class\n */\nvar DutyCategory = {\n\n  /**\n   * Check if user is auth or not via API call\n   */\n  find: function(dutyCategoryId, callback) {\n\n    $.ajax({\n      method: \"GET\",\n      url: \"/api/admin/duty_categories/\"+dutyCategoryId,\n      data: {}\n\n    }).done(function(res) {\n\n      callback(res);\n\n    }).error(function(err) {\n\n      if (typeof err == \"undefined\") {\n        return;\n      }\n      \n      callback({success: false, error: err.responseJSON.error});\n\n    });\n\n  },\n\n}\n\nmodule.exports = DutyCategory;\n","/**\n * Link Class\n */\nvar Link = {\n\n  /**\n   * Get the total number of products within the cart\n   */\n  wechat: function(raw_url, callback) {\n\n    // NOTE : condition race made it impossible to build\n    // I passed 2 full days on this problem\n    // Good luck.\n    // - Laurent\n    $.ajax({\n      method: \"GET\",\n      url: \"/api/admin/links/wechat\",\n      data: {raw_url: raw_url}\n\n    }).done(function(res) {\n\n      callback(res);\n\n    }).error(function(err) {\n\n      if (typeof err == \"undefined\") {\n        return;\n      }\n\n      callback({success: false, error: err.responseJSON.error});\n\n    });\n\n  },\n\n};\n\nmodule.exports = Link;\n","/**\n * NavigationModel Class\n */\nvar NavigationModel = {\n\n  /**\n   * Check if user is auth or not via API call\n   */\n  setLocation: function(location, callback) {\n\n    $.ajax({\n      method: \"PATCH\",\n      url: \"/api/guest/navigation/\",\n      data: {\"location\" : location}\n\n    }).done(function(res) {\n      \n      callback(res);\n\n    }).error(function(err) {\n\n      if (typeof err == \"undefined\") {\n        return;\n      }\n\n      callback({success: false, error: err.responseJSON.error});\n\n    });\n\n  },\n\n}\n\nmodule.exports = NavigationModel;\n","/**\n * OrderItem Class\n */\nvar OrderItem = {\n\n  /**\n   * Check if user is auth or not via API call\n   */\n  setQuantity: function(orderItemId, quantity, callback) {\n\n    $.ajax({\n      method: \"PATCH\",\n      url: \"/api/guest/order_items/\"+orderItemId,\n      data: {\"quantity\" : quantity}\n\n    }).done(function(res) {\n\n      callback(res);\n\n    }).error(function(err) {\n\n      if (typeof err == \"undefined\") {\n        return;\n      }\n\n      callback({success: false, error: err.responseJSON.error});\n\n    });\n\n  },\n\n  setPackageSetQuantity: function(packageSetId, quantity, callback) {\n\n    $.ajax({\n        method: \"PATCH\",\n        url: \"/api/guest/package_sets/\"+packageSetId,\n        data: {\"quantity\" : quantity}\n\n    }).done(function(res) {\n\n        callback(res);\n\n    }).error(function(err) {\n\n      if (typeof err == \"undefined\") {\n        return;\n      }\n\n      callback({success: false, error: err.responseJSON.error});\n\n    });\n\n  },\n\n  addSku: function(productId, skuId, quantity, callback) {\n    $.ajax({\n        method: \"POST\",\n        url: \"/api/guest/order_items\",\n        data: {product_id: productId, sku_id: skuId, quantity: quantity}\n\n    }).done(function(res) {\n\n        callback(res);\n\n    }).error(function(err) {\n\n      if (typeof err == \"undefined\") {\n        return;\n      }\n\n      callback({success: false, error: err.responseJSON.error});\n\n    });\n  },\n\n  removeProduct: function (orderItemId, callback) {\n    $.ajax({\n      method: \"DELETE\",\n      url: \"/api/guest/order_items/\" + orderItemId\n\n      }).done(function (res) {\n\n        callback(res);\n\n      }).error(function (err) {\n\n        if (typeof err == \"undefined\") {\n          return;\n        }\n\n        callback({success: false, error: err.responseJSON.error});\n\n      });\n    },\n\n    removeOrder: function (orderId, callback) {\n        $.ajax({\n            method: \"DELETE\",\n            url: \"/api/customer/orders/\" + orderId\n\n        }).done(function (res) {\n\n            callback(res);\n\n        }).error(function (err) {\n\n          if (typeof err == \"undefined\") {\n            return;\n          }\n\n          callback({success: false, error: err.responseJSON.error});\n\n        });\n    },\n\n    addPackageSet: function (packageSetId, callback) {\n        $.ajax({\n            method: \"POST\",\n            url: \"/api/guest/package_sets?\",\n            data: { \"package_set_id\": packageSetId }\n\n        }).done(function (res) {\n\n            callback(res);\n\n        }).error(function (err) {\n\n          if (typeof err == \"undefined\") {\n            return;\n          }\n\n          callback({success: false, error: err.responseJSON.error});\n\n        });\n    }\n\n};\n\nmodule.exports = OrderItem;\n","/**\n * OrderPayment Class\n */\nvar OrderPayment = {\n\n  /**\n   * Get the ProductSku details\n   */\n  show: function(orderPaymentId, callback) {\n\n      $.ajax({\n\n        method: \"GET\",\n        url: '/api/customer/order_payments/' + orderPaymentId,\n        data: {}\n\n      }).done(function(res) {\n\n        callback(res);\n\n      }).error(function(err) {\n\n        if (typeof err == \"undefined\") {\n          return;\n        }\n\n        callback({success: false, error: err.responseJSON.error});\n\n      });\n\n  },\n\n};\n\nmodule.exports = OrderPayment;\n","/**\n * Product Class\n */\nvar Product = {\n\n  /**\n   * Like a product\n   */\n  like: function(productId, callback) {\n\n      $.ajax({\n        method: \"PUT\",\n        url: \"/api/customer/favorites/\"+productId,\n        data: {}\n\n      }).done(function(res) {\n\n        callback(res);\n\n      }).error(function(err) {\n\n        if (typeof err == \"undefined\") {\n          return;\n        }\n\n        callback({success: false, error: err.responseJSON.error});\n\n      });\n\n  },\n\n  /**\n   * Unlike a product\n   */\n  unlike: function(productId, callback) {\n\n      $.ajax({\n        method: \"DELETE\",\n        url: \"/api/customer/favorites/\"+productId,\n        data: {}\n\n      }).done(function(res) {\n\n        callback(res);\n\n      }).error(function(err) {\n\n        if (typeof err == \"undefined\") {\n          return;\n        }\n        \n        callback({success: false, error: err.responseJSON.error});\n\n      });\n\n  },\n\n}\n\nmodule.exports = Product;\n","/**\n * ProductSku Class\n */\nvar ProductSku = {\n\n  /**\n   * Get the ProductSku details\n   */\n  show: function(productId, optionIds, callback) {\n\n      $.ajax({\n\n        method: \"GET\",\n        url: '/api/guest/products/' + productId + '/skus/0', // 0 is to match with the norm ... hopefully when we go away from mongo there's no such things\n        data: {option_ids: optionIds}\n\n      }).done(function(res) {\n\n        callback(res);\n\n      }).error(function(err) {\n\n        if (typeof err == \"undefined\") {\n          return;\n        }\n\n        callback({success: false, error: err.responseJSON.error});\n\n      });\n\n  },\n\n  /**\n   * Get all the Skus from the Product\n   */\n  all: function(productId, callback) {\n\n      $.ajax({\n\n        method: \"GET\",\n        url: '/api/guest/products/' + productId + '/skus',\n        data: {}\n\n      }).done(function(res) {\n\n        callback(res);\n\n      }).error(function(err) {\n\n        if (typeof err == \"undefined\") {\n          return;\n        }\n        \n        callback({success: false, error: err.responseJSON.error});\n\n      });\n\n  },\n\n}\n\nmodule.exports = ProductSku;\n","/**\n * Translations Class\n */\nvar Translations = {\n\n  /**\n   * Get the Translations details\n   */\n  show: function(translationSlug, translationScope, callback) {\n\n      $.ajax({\n\n        method: \"GET\",\n        url: '/api/guest/translations/0',\n        data: {translation_slug: translationSlug, translation_scope: translationScope}\n\n      }).done(function(res) {\n\n        callback(res);\n\n      }).error(function(err) {\n\n        if (typeof err == \"undefined\") {\n          return;\n        }\n        \n        callback({success: false, error: err.responseJSON.error});\n\n      });\n\n  },\n\n}\n\nmodule.exports = Translations;\n","/**\n * RefreshTotalProducts Class\n */\nvar RefreshTotalProducts = {\n\n  /**\n   * Refresh it\n   */\n  perform: function() {\n\n    var Cart = require('javascripts/models/cart');\n    Cart.total(function(res) {\n      $(\".js-total-products\").html(res.datas)\n      RefreshTotalProducts.resolveHiding(res.datas);\n    });\n\n  },\n\n  resolveHiding: function(total) {\n    if (total > 0) {\n      $('.js-total-products').removeClass('+hidden');\n    } else {\n      $('.js-total-products').addClass('+hidden');\n    }\n  }\n\n}\n\nmodule.exports = RefreshTotalProducts;\n","/**\n * Starters Class\n */\nvar Starters = [\n\n  'auto_resize',\n  'back_to_top',\n  'bootstrap',\n  'datepicker',\n  'distpicker',\n  'editable_fields',\n  'footer',\n  'input_validation',\n  'images_handler',\n  'lazy_loader',\n  'left_menu',\n  'links_behaviour',\n  'messages',\n  'mobile_menu',\n  'mobile',\n  'navigation',\n  'product_favorite',\n  'product_form',\n  'products_list',\n  'qrcode',\n  'refresh_time',\n  'responsive',\n  'search',\n  'sku_form',\n  'sweet_alert',\n  'table_clicker',\n  'tooltipster',\n  'total_products',\n  'weixin',\n]\n\nmodule.exports = Starters;\n","/**\n * AutoResize Class\n */\nvar AutoResize = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      this.setupAutoResize();\n\n    },\n\n    setupAutoResize: function() {\n\n      $('textarea').textareaAutoSize();\n\n    },\n}\n\nmodule.exports = AutoResize;\n","/**\n * BackToTop Class\n */\n var BackToTop = {\n\n   /**\n   * Initializer\n   */\n   init: function() {\n\n     this.setupBackToTop();\n\n   },\n\n   /**\n    * Back to top button system\n    * NOTE : This was taken from the Internet\n    * Don't hesitate to refactor if needed\n    */\n   setupBackToTop: function() {\n\n     $(function () {\n         $.scrollUp({\n             scrollName: 'scrollUp',      // Element ID\n             scrollDistance: 300,         // Distance from top/bottom before showing element (px)\n             scrollFrom: 'top',           // 'top' or 'bottom'\n             scrollSpeed: 300,            // Speed back to top (ms)\n             easingType: 'linear',        // Scroll to top easing (see http://easings.net/)\n             animation: 'fade',           // Fade, slide, none\n             animationSpeed: 200,         // Animation speed (ms)\n             scrollTrigger: false,        // Set a custom triggering element. Can be an HTML string or jQuery object\n             scrollTarget: false,         // Set a custom target element for scrolling to. Can be element or number\n             scrollText: '<i class=\"fa fa-caret-up\"></i>', // Text for element, can contain HTML\n             scrollTitle: false,          // Set a custom <a> title if required.\n             scrollImg: false,            // Set true to use image\n             activeOverlay: false,        // Set CSS color to display scrollUp active point, e.g '#00FFFF'\n             zIndex: 2147483647           // Z-Index for the overlay\n         });\n     });\n\n   },\n\n\n }\n\nmodule.exports = BackToTop;\n","/**\n * Bootstrap Class\n */\nvar Bootstrap = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      this.startPopover();\n      this.startTooltip();\n\n    },\n\n    /**\n     * \n     */\n    startPopover: function() {\n\n      $(\"a[rel~=popover], .has-popover\").popover();\n          \n    },\n\n    startTooltip: function() {\n\n      $(\"a[rel~=tooltip], .has-tooltip\").tooltip();\n          \n    },\n\n}\n\nmodule.exports = Bootstrap;\n\n\n","/**\n * Datepicker Class\n */\nvar Datepicker = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      if ($('#js-show-datepicker').length > 0) {\n\n        let showDatepicker = $('#js-show-datepicker').data();\n        let language = showDatepicker.language ? showDatepicker.language : 'de';\n\n        if (language == 'de') {\n          require(\"javascripts/lib/foreign/datepicker-de.js\");\n        } else {\n          require(\"javascripts/lib/foreign/datepicker-zh-CN.js\");\n        }\n\n        $( \"#datepicker\" ).datepicker({\n          changeMonth: true,\n          changeYear: true,\n          yearRange: '1945:'+(new Date).getFullYear(),\n          dateFormat: \"yy-mm-dd\"    \n        });\n     \n      }\n\n    },\n\n}\n\nmodule.exports = Datepicker;\n\n\n","/**\n * Distpicker Class\n */\nvar Distpicker = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      if ($('#distpicker').length > 0) {\n        $(\"#distpicker\").distpicker();\n      }\n\n    },\n\n}\n\nmodule.exports = Distpicker;\n","/**\n* EditableFields Class\n* Will make the edit fields appear and the text disappear\n* It's used in the order edit for admin (for example)\n* This is a very small system, not ambitious at all\n* Keep it this way or use a real plugin.\n*/\nvar EditableFields = {\n\n  /**\n  * Initializer\n  */\n  init: function() {\n\n    this.hideAllEditable();\n    $('.js-editable-click').on('click', $.proxy(this.manageShowEditable, this));\n\n  },\n\n  manageShowEditable: function(e) {\n    e.preventDefault();\n    this.showEditable(e.currentTarget);\n  },\n\n  hideAllEditable: function() {\n    $('.js-editable-text').show();\n    $('.js-editable-field').hide();\n    $('.js-editable-click').show();\n    $('.js-editable-submit').hide();\n  },\n\n  hideEditable: function(element) {\n    $(element).parent().find('.js-editable-text').show();\n    $(element).parent().find('.js-editable-field').hide();\n    $(element).parent().find('.js-editable-click').show();\n    $(element).parent().find('.js-editable-submit').hide();\n  },\n\n  showEditable: function(element) {\n    $(element).parent().find('.js-editable-text').hide();\n    $(element).parent().find('.js-editable-field').show();\n    $(element).parent().find('.js-editable-click').hide();\n    $(element).parent().find('.js-editable-submit').show();\n  },\n\n}\n\nmodule.exports = EditableFields;\n","/**\n * Footer Class\n */\nvar Footer = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      this.stickyFooter();\n\n    },\n\n    /**\n     * Put the footer on the bottom of the page\n     */\n    stickyFooter: function() {\n\n      var self = this;\n\n      if ($('.js-footer-stick').length > 0) {\n\n        Footer.processStickyFooter();\n\n        $(document).on('message:hidden', function() {\n          Footer.processStickyFooter();\n        });\n\n        $(window).resize(function() {\n          Footer.processStickyFooter();\n        });\n\n      }\n\n    },\n\n    processStickyFooter: function() {\n\n      var docHeight, footerHeight, footerTop;\n\n      $('.js-footer-stick').css('margin-top', 0);\n\n      var docHeight = $(window).height();\n      var footerHeight = $('.js-footer-stick').height();\n      var headerHeight = $('.navbar-fixed-top').first().height();\n      var footerTop = $('.js-footer-stick').position().top + footerHeight;\n\n      if (footerTop < docHeight) {\n        $('.js-footer-stick').css('margin-top', (docHeight + (headerHeight * 1.30) - footerTop) + 'px');\n      }\n\n    },\n\n}\n\nmodule.exports = Footer;\n","/**\n* ImagesHandler Class\n*/\nvar ImagesHandler = {\n\n  elements: {\n    image: \".js-file-upload\"\n  },\n\n  /**\n  * Initializer\n  */\n  init: function() {\n\n    this.validateImageFile();\n    this.imageLiveRefresh();\n\n  },\n\n  /**\n  * Validate the image itself when it's changed\n  * @return {void}\n  */\n  validateImageFile: function() {\n\n    $(ImagesHandler.elements.image).on('change', function() {\n\n      var Messages = require(\"javascripts/lib/messages\");\n      var Translation = require(\"javascripts/lib/translation\");\n      var inputFile = this;\n\n      var maxExceededMessage = Translation.find('max_exceeded_message', 'image_upload');\n      var extErrorMessage = Translation.find('ext_error_message', 'image_upload');\n      var allowedExtension = [\"jpg\", \"JPG\", \"jpeg\", \"JPEG\", \"png\", \"PNG\"];\n      var extName;\n      var maxFileSize = 1048576 * 3; // 3MB\n      var sizeExceeded = false;\n      var extError = false;\n\n      $.each(inputFile.files, function() {\n        if (this.size && maxFileSize && this.size > maxFileSize) {sizeExceeded=true;};\n        extName = this.name.split('.').pop();\n        if ($.inArray(extName, allowedExtension) == -1) {extError=true;};\n      });\n\n      if (sizeExceeded) {\n        Messages.makeError(maxExceededMessage);\n        $(inputFile).val('');\n      };\n\n      if (extError) {\n        Messages.makeError(extErrorMessage);\n        $(inputFile).val('');\n      };\n\n    });\n  },\n\n  /**\n  * This system is basically live refreshing the images when you select one from your browser\n  * It's mainly used by the shopkeepers\n  * @return {void}\n  */\n  imageLiveRefresh: function() {\n\n    if ($(ImagesHandler.elements.image).length > 0) {\n\n      $(ImagesHandler.elements.image).each(function() {\n\n        var fileElement = $(this)\n\n        $(this).change(function(event){\n          var input = $(event.currentTarget);\n          var file = input[0].files[0];\n          var reader = new FileReader();\n          reader.onload = function(e){\n            var image_base64 = e.target.result;\n\n            let image_div = fileElement.attr('image_selector');\n            $(image_div).attr(\"src\", image_base64);\n\n            // we show the update\n            let add_link = fileElement.attr('image_selector')+'_add';\n            $(add_link).removeClass('hidden');\n\n          };\n          reader.readAsDataURL(file);\n        });\n\n      });\n\n    }\n\n  },\n\n}\n\nmodule.exports = ImagesHandler;\n","/**\n* InputValidation Class\n*/\nvar InputValidation = {\n\n  /**\n  * Initializer\n  */\n  init: function() {\n\n    this.restrictToChinese();\n\n  },\n\n  /**\n   * USE : just add data-error to an input to have the custom error show up\n   */\n  restrictToChinese: function() {\n\n    $(\"input\").on('invalid', function (e) {\n      if (typeof $(this).data('error') != \"undefined\") {\n        this.setCustomValidity($(this).data('error'));\n      }\n    });\n\n    $(\"input\").on('keyup', function(e) {\n      this.setCustomValidity(\"\");\n    });\n\n  },\n\n\n}\n\nmodule.exports = InputValidation;\n","/**\n * LazyLoader Class\n */\nvar LazyLoader = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      this.startLazyLoader();\n\n    },\n\n    /**\n     *\n     */\n    startLazyLoader: function() {\n\n      $(\"div.lazy\").lazyload({\n          effect : \"fadeIn\",\n          threshold : 650\n      });\n\n    },\n\n}\n\nmodule.exports = LazyLoader;\n","/**\n * LeftMenu Class\n */\nvar LeftMenu = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      this.startLeftMenu();\n\n    },\n\n    /**\n     *\n     */\n    startLeftMenu: function() {\n\n      $('select.nice').niceSelect();\n      $('.overlay').on('click', function(e) {\n        $('#mobile-menu-button').trigger('click');\n      });\n      \n      // NOTE : no idea what this is, i think it doesn't exist anymore\n      // - Laurent 26/01/2017\n        // $('#left_menu > ul > li > a').click(function() {\n        //     $('#left_menu li').removeClass('active');\n        //     $(this).closest('li').addClass('active');\n        //     var checkElement = $(this).next();\n        //     if((checkElement.is('ul')) && (checkElement.is(':visible'))) {\n        //         $(this).closest('li').removeClass('active');\n        //         checkElement.slideUp('normal');\n        //     }\n        //     if((checkElement.is('ul')) && (!checkElement.is(':visible'))) {\n        //         $('#left_menu ul ul:visible').slideUp('normal');\n        //         checkElement.slideDown('normal');\n        //     }\n        //     if($(this).closest('li').find('ul').children().length == 0) {\n        //         return true;\n        //     } else {\n        //         return false;\n        //     }\n        // });\n\n    },\n\n}\n\nmodule.exports = LeftMenu;\n","/**\n * LinkBehaviour Class\n */\nvar LinkBehaviour = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      this.setupSubmitForm();\n\n    },\n\n    /**\n     * If we use the data-submit-form it will force submit with a simple link\n     */\n    setupSubmitForm: function() {\n\n      $(document).on('click', '[data-form=\"submit\"]', function(e) {\n        e.preventDefault();\n        $(this).closest('form').submit()\n      });\n\n    },\n\n}\n\nmodule.exports = LinkBehaviour;\n","/**\n * Messages Class\n */\nvar Messages = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      this.hideMessages();\n\n    },\n\n    /**\n     *\n     */\n    hideMessages: function() {\n\n      let Messages = require(\"javascripts/lib/messages\");\n\n      if ($(\"#message-container-error\").length > 0) {\n        Messages.activateHide('#message-container-error', 4000);\n        Messages.forceHide('#message-container-error');\n      }\n\n      if ($(\"#message-container-success\").length > 0) {\n        Messages.activateHide('#message-container-success', 5000);\n        Messages.forceHide('#message-container-success')\n      }\n\n    },\n\n}\n\nmodule.exports = Messages;\n","/**\n * AutoResize Class\n */\nvar AutoResize = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      this.setupInternational();\n\n    },\n\n    setupInternational: function() {\n\n      $(\"#user_mobile\").intlTelInput({\n        nationalMode: false,\n        preferredCountries: [\"DE\", \"CN\"],\n        initialCountry: \"DE\"\n      });\n\n      $(\"#address_mobile\").intlTelInput({\n        nationalMode: false,\n        preferredCountries: [\"DE\", \"CN\"],\n        initialCountry: \"CN\"\n      });\n\n      $(\"#shop_application_mobile\").intlTelInput({\n        nationalMode: false,\n        preferredCountries: [\"DE\", \"CN\"],\n        initialCountry: \"DE\"\n      });\n\n      $(\"#shop_application_tel\").intlTelInput({\n        nationalMode: false,\n        preferredCountries: [\"DE\", \"CN\"],\n        initialCountry: \"DE\"\n      });\n\n    },\n}\n\nmodule.exports = AutoResize;\n","/**\n * MobileMenu Class\n */\nvar MobileMenu = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      this.startMobileMenu();\n\n    },\n\n    /**\n     *\n     */\n    startMobileMenu: function() {\n\n      this.manageFade();\n\n    },\n\n    manageFade: function() {\n\n      $('.navmenu')\n          .on('show.bs.offcanvas', function () {\n          $('.canvas').addClass('sliding');\n      })\n          .on('shown.bs.offcanvas', function () {\n      })\n          .on('hide.bs.offcanvas', function () {\n          $('.canvas').removeClass('sliding');\n      })\n          .on('hidden.bs.offcanvas', function () {\n      });\n\n    }\n\n}\n\nmodule.exports = MobileMenu;\n","/**\n * Navigation Class\n */\nvar Navigation = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      if ($('#js-navigation-disabled').length == 0) {\n\n        this.storeNavigation();\n      }\n\n    },\n\n    /**\n     * We send the navigation to the back-end\n     */\n    storeNavigation: function() {\n\n      var NavigationModel = require(\"javascripts/models/navigation_model\");\n      NavigationModel.setLocation(window.location.href, function(res) {\n        // Nothing yet\n      });\n\n    },\n\n}\n\nmodule.exports = Navigation;\n","var Translation = require('javascripts/lib/translation');\nvar Product = require(\"javascripts/models/product\");\nvar Messages = require(\"javascripts/lib/messages\");\n\n/**\n * ProductFavorite Class\n */\nvar ProductFavorite = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      this.setupHeartClick();\n\n    },\n\n    /**\n     * manage the heart click events\n     * @return {void}\n     */\n    setupHeartClick: function() {\n      this.heartElement().on('click', $.proxy(this.onHeartClick, this));\n    },\n\n    /**\n     * Main button for the favorite system\n     * @return {element}\n     */\n    heartElement: function() {\n      return $('.js-heart-click')\n    },\n\n    /**\n     * returns the productId of the product on the page@\n     * @return {element}\n     */\n    productId: function() {\n      return this.heartElement().attr('data-product-id')\n    },\n\n    /**\n     * Is the product in favorite or not ?\n     * @return {boolean}\n     */\n    isFavorite: function() {\n      return this.heartElement().attr('data-favorite') == '1'\n    },\n\n    /**\n     * When the heart is clicked\n     */\n    onHeartClick: function(e) {\n\n      e.preventDefault();\n\n      if (this.isFavorite()) {\n        this.removeFavorite();\n      } else {\n        this.addFavorite();\n      }\n\n    },\n\n    /**\n     * We unlike from the model and display the unlike\n     * @return {void}\n     */\n    removeFavorite: function() {\n\n      this.displayUnlike();\n      this.modelUnlike($.proxy(this.updateTotalFavorites, this))\n\n    },\n\n    /**\n     * We like from the model and display the like (heart)\n     * @return {void}\n     */\n    addFavorite: function() {\n\n      this.displayLike();\n      this.modelLike($.proxy(this.updateTotalFavorites, this))\n\n    },\n\n    /**\n     * Update the favorites count on the display\n     * @param  {Function} res\n     * @return {void}\n     */\n    updateTotalFavorites: function(res) {\n      let favoritesCount = res.favorites.length;\n      $('#total-likes').html(favoritesCount);\n    },\n\n    /**\n     * Like the model and manage errors on the display\n     * @param  {Function} callback\n     * @return {Function}\n     */\n    modelLike: function(callback) {\n      Product.like(this.productId(), this.handleModelResponse(callback));\n    },\n\n    /**\n     * Unlike the model and manage errors on the display\n     * @param  {Function} callback\n     * @return {Function}\n     */\n    modelUnlike: function(callback) {\n      Product.unlike(this.productId(), this.handleModelResponse(callback));\n    },\n\n    /**\n     * Handle the model response if he likes or unlike\n     * @param  {Function} callback\n     * @return {Function}\n     */\n    handleModelResponse: function(callback) {\n      return function(response) {\n\n        if (res.success === false) {\n          Messages.makeError(res.error);\n        } else {\n          callback(response);\n        }\n\n      }\n    },\n\n    /**\n     * Change the elements so they look unliked\n     * @return {void}\n     */\n    displayUnlike: function() {\n      this.heartElement().find('i').addClass('+grey').removeClass('+pink');\n      this.heartElement().attr('data-favorite', '0');\n      this.heartElement().find('span').html(Translation.find('add', 'favorites'))\n    },\n\n    /**\n     * Change the elements so they look liked\n     * @return {void}\n     */\n    displayLike: function(el) {\n      this.heartElement().find('i').addClass('+pink').removeClass('+grey');\n      this.heartElement().attr('data-favorite', '1');\n      this.heartElement().find('span').html(Translation.find('remove', 'favorites'))\n    },\n\n}\n\nmodule.exports = ProductFavorite;\n","var Translation = require('javascripts/lib/translation');\n\n/**\n * ProductForm Class\n */\nvar ProductForm = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      this.manageShopkeeperProductForm();\n\n    },\n\n    manageShopkeeperProductForm: function() {\n\n      if ($(\"#js-product-form\").length > 0) {\n\n        var productForm = $(\"#js-product-form\").data();\n        var productId = productForm.productId;\n\n        $('select.duty-categories').multiselect({\n          nonSelectedText: Translation.find('non_selected_text', 'multiselect'),\n          nSelectedText: Translation.find('n_selected_text', 'multiselect'),\n          enableFiltering: true,\n          enableCaseInsensitiveFiltering: true,\n          maxHeight: 400\n        }).multiselect();\n\n        // TODO : it doesn't seems it's used in the system anymore\n        // $('#edit_product_submit_btn').click( function() {\n        //\n        //       $('input.dynamical-required').each(\n        //         function () {\n        //           if ( $(this).val().length == 0 ) {\n        //             console.log('yes');\n        //             $(this).addClass('invalidBorderClass');\n        //           } else {\n        //             $(this).removeClass('invalidBorderClass');\n        //           }\n        //         }\n        //       );\n        //\n        //       if ( $('.invalidBorderClass').length > 0 ) {\n        //         return false;\n        //       }\n        //\n        //     });\n        //\n        //     $('a[rel=popover]').popover();\n        //\n        //     var panel_cnt = $(\"#variants_panel_\"+productId).children('.panel-body').find('.panel').length\n        //     if (panel_cnt == 0) $(\"#a_add_variant_\"+productId).click();\n\n      }\n\n    }\n\n}\n\nmodule.exports = ProductForm;\n","/**\n * ProductsList Class\n */\nvar ProductsList = { // CURRENTLY NOT IN USED IN THE SYSTEM\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      this.manageProductsWall();\n\n    },\n\n    manageProductsWall: function() {\n\n    },\n\n}\n\nmodule.exports = ProductsList;\n","/**\n * QrCode Class\n */\nvar QrCode = {\n\n    initialized: false,\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      $(window).on('resize', _.debounce($.proxy(this.onResize, this), 300)).trigger('resize');\n\n    },\n\n    onResize: function(e) {\n\n      if (this.isMobile() && this.initialized) {\n        this.destroy();\n        return;\n      }\n\n      if (this.isMobile()) {\n        return;\n      }\n\n      if (!this.initialized) {\n        this.setupWechat();\n        this.setupWeibo();\n        this.initialized = true;\n        return;\n      }\n\n    },\n\n    isMobile: function() {\n      /**\n       * NOTE : this 994 matches with the breakpoint of `=breakpoint` in SASS\n       * Please be careful and change the one in the SASS as well\n       */\n      return $(window).width() <= 994;\n    },\n\n    destroy: function() {\n      $('#weibo-qr-code-trigger').off('mouseover').off('mouseout');\n      $('#wechat-qr-code-trigger').off('mouseover').off('mouseout');\n      $('#wechat-qr-code').addClass('hidden');\n      $('#weibo-qr-code').addClass('hidden');\n      QrCode.initialized = false;\n    },\n\n    setupWechat: function() {\n\n      $('#wechat-qr-code-trigger').on('mouseover', function(e) {\n        $('#wechat-qr-code').removeClass('hidden');\n      });\n\n      $('#wechat-qr-code-trigger').on('mouseout', function(e) {\n        $('#wechat-qr-code').addClass('hidden');\n      });\n\n      $('#wechat-qr-code-trigger').on('click', function(e) {\n        if ($('#wechat-qr-code').hasClass('hidden')) {\n            $('#wechat-qr-code').removeClass('hidden');\n        } else {\n            $('#wechat-qr-code').addClass('hidden');\n        }\n      });\n\n    },\n\n    setupWeibo: function() {\n\n      $('#weibo-qr-code-trigger').on('mouseover', function(e) {\n        $('#weibo-qr-code').removeClass('hidden');\n      });\n\n      $('#weibo-qr-code-trigger').on('mouseout', function(e) {\n        $('#weibo-qr-code').addClass('hidden');\n      });\n\n      $('#weibo-qr-code-trigger').on('click', function(e) {\n        if ($('#weibo-qr-code').hasClass('hidden')) {\n            $('#weibo-qr-code').removeClass('hidden');\n        } else {\n            $('#weibo-qr-code').addClass('hidden');\n        }\n      });\n\n    },\n\n\n}\n\nmodule.exports = QrCode;\n","/**\n * RefreshTime Class\n */\nvar RefreshTime = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      this.refreshTime('#utc-time', 'UTC');\n      this.refreshTime('#china-time', 'Asia/Shanghai');\n      this.refreshTime('#germany-time', 'Europe/Berlin');\n\n    },\n\n    /**\n     * Change the current time html\n     * @param  {#} selector\n     * @return void\n     */\n    displayTime: function(selector, time_zone) {\n      let time = moment().tz(time_zone).format('HH:mm:ss');\n      $(selector).html(time);\n    },\n\n    /**\n     * Activate the time refresh for specific selector\n     * @param  {#} selector\n     * @return void\n     */\n    refreshTime: function(selector, time_zone) {\n      var remote_time = $(selector).html();\n      if (typeof remote_time != \"undefined\") {\n        setInterval(function() {\n          RefreshTime.displayTime(selector, time_zone)\n        }, 1000);\n      }\n    },\n\n}\n\nmodule.exports = RefreshTime;\n","/**\n * Responsive Class\n */\nvar Responsive = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      this.manageCategoriesMenu();\n\n    },\n\n    manageCategoriesMenu: function() {\n\n      if ($('.mobile-category-menu').length > 0) {\n\n        var Translation = require('javascripts/lib/translation');\n\n        $('#categories-menu').slicknav({\n\n          \"prependTo\": \".mobile-category-menu\", //\".container-fluid\"\n          \"label\": Translation.find('menu', 'button'),\n          \"closeOnClick\": true\n\n        });\n\n        // We hook the slicknav menu with some HTML content\n        // It will occur after the menu is ready.\n        // To stay clean it takes an invisible element within the HTML\n        let left_side_content = $('#categories-menu-left-side').html();\n        $('.slicknav_menu').prepend(left_side_content);\n\n      }\n\n    },\n\n}\n\nmodule.exports = Responsive;\n","/**\n * Search Class\n */\nvar Search = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      this.categoryFilter();\n      this.searchInput();\n      this.statusFilter();\n\n    },\n\n    /**\n     * We make the search behavior\n     */\n    searchInput: function() {\n\n      $('.js-search-button i').on('click', function(e) {\n        e.preventDefault(); // prevent go back to the header\n        Search.showSearchForm();\n        $('.js-search-input').focus();\n      });\n\n      $('.js-search-input').on('focusout', function(e) {\n          Search.hideSearchForm();\n      });\n\n    },\n\n    showSearchForm: function() {\n      $('.js-search-button').addClass('+hidden');\n      $('.js-search-form').removeClass('+hidden');\n    },\n\n    hideSearchForm: function() {\n      $('.js-search-button').removeClass('+hidden');\n      $('.js-search-form').addClass('+hidden');\n    },\n\n    /**\n     * We make the category filter auto-trigger\n     */\n    categoryFilter: function() {\n\n      $('.js-category-filter').on('change', function(e) {\n\n        let category_id = $(this).val();\n\n        var UrlProcess = require('javascripts/lib/url_process');\n        UrlProcess.insertParam('category_id', category_id);\n\n      });\n\n      $('.js-package-set-category-filter').on('change', function(e) {\n\n        let category_id = $(this).val();\n\n        var UrlProcess = require('javascripts/lib/url_process');\n        UrlProcess.insertParam('category_slug', category_id);\n\n      });\n\n    },\n\n    statusFilter: function() {\n        $('.js-order-status-filter').on('change', function(e) {\n\n            let status = $(this).val();\n\n            var UrlProcess = require('javascripts/lib/url_process');\n            UrlProcess.insertParam('status', status);\n\n        });\n    },\n\n}\n\nmodule.exports = Search;\n","/**\n * SkuForm Class\n * TODO : this classe should be moved over to the sku area only\n * it's not a starter or anything like that, spreading prop changes\n * on the global system is not safe.\n */\nvar SkuForm = {\n\n    elements: {\n      form: '#sku_form',\n      checkbox: '#sku_unlimited',\n      input: '#sku_quantity'\n    },\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      this.setupLimitSystem();\n\n    },\n\n    /**\n     * If we are on the correct page containing `js-sku-form`\n     * We setup the limit display and activate the checkbox click listener\n     * @return {void}\n     */\n    setupLimitSystem: function() {\n\n      if ($(\"#js-sku-form\").length == 0) {\n        return;\n      }\n\n      SkuForm.resetLimitDisplay();\n\n      $(SkuForm.elements.checkbox).on('click', function() {\n        SkuForm.resetLimitDisplay();\n      });\n\n    },\n\n    /**\n     * Reset the limit display\n     * It will show or hide the input\n     * @return {void}\n     */\n    resetLimitDisplay: function() {\n      if ($(SkuForm.elements.checkbox).is(\":checked\")) {\n        SkuForm.switchOffLimit();\n        return;\n      }\n      SkuForm.switchOnLimit();\n    },\n\n    /**\n     * We disable the limit input and make it unlimited\n     * @return {void}\n     */\n    switchOffLimit: function() {\n      $(SkuForm.elements.form).find(SkuForm.elements.input).val('0').prop('disabled', 'true').parent().hide();\n    },\n\n    /**\n     * We activate the limit input and make it limited\n     * @return {void}\n     */\n    switchOnLimit: function() {\n      $(SkuForm.elements.form).find(SkuForm.elements.input).removeAttr('disabled').parent().show();\n    }\n\n}\n\nmodule.exports = SkuForm;\n","/**\n * SweetAlert Class\n */\nvar SweetAlert = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      this.startAlert();\n\n    },\n\n    /**\n     *\n     */\n    startAlert: function() {\n/*\n      $.rails.allowAction = function(link){\n  if (link.data(\"confirm\") == undefined){\n    console.log(\"fuck it\");\n    return true;\n  }\n  $.rails.showConfirmationDialog(link);\n  return false;\n*/\n//}\n\n/* NOT COMPATIBLE WITH RAILS SYSTEM ...\n      $('.js-alert').click(function(e) {\n\n        e.preventDefault();\n        self = this;\n\n        swal({\n          title: $(self).data('title') || \"Are you sure ?\",\n          text: $(self).data('text') || \"This action cannot be undone.\",\n          type: \"warning\",\n          showCancelButton: true,\n          confirmButtonColor: \"#DD6B55\",\n          confirmButtonText: \"Yes, delete it!\",\n          closeOnConfirm: false\n        }, function(){\n          swal({\n            title: \"Processing!\",\n            text: \"Your request is being processed ...\",\n            type: 'success',\n            showConfirmButton: false\n          });\n          window.location.href = $(self).attr('href');\n        });\n\n      })\n*/\n    },\n\n}\n\nmodule.exports = SweetAlert;\n","/**\n * TableClicker Class\n */\nvar TableClicker = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      this.handleTableClicker();\n\n    },\n\n    handleTableClicker: function() {\n      $('tr').on('click', TableClicker.onClickTr)\n    },\n\n    onClickTr: function(e) {\n      let link = $(e.currentTarget).data('href');\n      if (typeof link !== \"undefined\") {\n        window.location = link;\n      }\n    }\n\n\n}\n\nmodule.exports = TableClicker;\n","/**\n * Tooltipster Class\n */\nvar Tooltipster = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      this.activateTooltipster();\n\n    },\n\n    activateTooltipster: function() {\n\n      $('.tooltipster').tooltipster({\n        'maxWidth': 350\n      });\n\n    },\n\n\n}\n\nmodule.exports = Tooltipster;\n","/**\n * TotalProducts Class\n */\nvar TotalProducts = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      this.refreshTotalProducts();\n\n    },\n\n    refreshTotalProducts: function() {\n\n      var refreshTotalProducts = require('../services/refresh_total_products');\n      refreshTotalProducts.resolveHiding($('.js-total-products').html());\n      //refreshTotalProducts.perform();\n      // <-- NOTE : this will make a condition race\n      // we found no solution but to just show manually and render from server side to avoid it.\n\n    },\n}\n\nmodule.exports = TotalProducts;\n","/**\n * WeixinStarter Class\n */\nvar WeixinStarter = {\n\n    /**\n     * Initializer\n     */\n    init: function() {\n\n      this.configure();\n      this.onReady();\n      this.onError();\n\n    },\n\n    data: function() {\n      return $('#weixin').data();\n    },\n\n    configure: function() {\n\n      wx.config({\n          debug: this.data().debug,\n          appId: this.data().appId,\n          timestamp: this.data().timestamp,\n          nonceStr: this.data().nonceStr,\n          signature: this.data().signature,\n          jsApiList: this.data().jsApiList\n      });\n\n    },\n\n    onReady: function() {\n\n      wx.ready(function(){\n        console.log('ready');\n      });\n\n    },\n\n    onError: function() {\n\n      wx.error(function(res){\n        console.log('error ' + res);\n      });\n\n    },\n\n}\n\nmodule.exports = WeixinStarter;\n"]}