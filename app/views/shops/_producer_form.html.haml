= form_for @shop, :html => {'data-toggle': 'validator', id: "edit_producer_form_#{locale}" } do |f|
  = hidden_field_tag :translation, value = locale
  .panel-group
    .panel.panel-info
      .panel-heading.text-center
        %label= I18n.t(:shopkeeper_info, scope: :edit_shop_application, locale: locale)
      .panel-body
        .form-group
          .row
            .col-md-4
              %label.required= I18n.t(:name, scope: :edit_shop, locale: locale)
            .col-md-8
              = f.text_field :name, :class => 'form-control', :required => true, :maxLength => Rails.configuration.max_short_text_length, :placeholder => I18n.t(:company_name_placeholder, scope: :edit_shop)
              %div.help-block.with-errors
        .form-group
          .row
            .col-md-4{ :title => I18n.t(:founding_year_info, scope: :edit_shop, locale: locale) }
              %i.fa.fa-info-circle{ :title => I18n.t(:founding_year_info, scope: :edit_shop, locale: locale) }
              %label.required= I18n.t(:founding_year, scope: :edit_shop, locale: locale)
            .col-md-8
              = f.text_field :founding_year, :class => 'form-control', :required => true, :pattern => '^(18|19|20)\d{2}$', :maxLength => 4, :placeholder => '2016'
              %div.help-block.with-errors
        .form-group
          .row
            .col-md-4
              %label= I18n.t(:register, scope: :edit_shop, locale: locale)
            .col-md-8
              = f.text_field :register, :class => 'form-control', :maxLength => Rails.configuration.max_tiny_text_length, :placeholder => 'HRB 123456'
              %div.help-block.with-errors
        .form-group
          .row
            .col-md-4{ :title => I18n.t(:desc_info, scope: :edit_shop, num: Rails.configuration.max_medium_text_length, locale: locale) }
              %i.fa.fa-info-circle{ :title => I18n.t(:desc_info, scope: :edit_shop, num: Rails.configuration.max_medium_text_length, locale: locale) }
              %label.required.translation= I18n.t(:desc, scope: :edit_shop, locale: locale)
            .col-md-8
              =  f.text_area :desc, :value => @shop.desc_translations[locale], :class => 'form-control', rows: 4, :required => true, :maxLength => Rails.configuration.max_medium_text_length
              %div.help-block.with-errors
        .form-group
          .row
            .col-md-4{ :title => I18n.t(:philosophy_info, scope: :edit_shop, num: Rails.configuration.max_long_text_length), locale: locale }
              %i.fa.fa-info-circle{ :title => I18n.t(:philosophy_info, scope: :edit_shop, num: Rails.configuration.max_long_text_length, locale: locale) }
              %label.required.translation= I18n.t(:philosophy, scope: :edit_shop, locale: locale)
            .col-md-8
              = f.text_area :philosophy, :value => @shop.philosophy_translations[locale], :class => 'form-control', rows: 4, :required => true, :maxLength => Rails.configuration.max_long_text_length
              %div.help-block.with-errors
        .form-group
          .row
            .col-md-4{ :title => I18n.t(:stories_info, scope: :edit_shop, num: Rails.configuration.max_long_text_length, locale: locale) }
              %i.fa.fa-info-circle{ :title => I18n.t(:stories_info, scope: :edit_shop, num: Rails.configuration.max_long_text_length, locale: locale) }
              %label.translation= I18n.t(:stories, scope: :edit_shop, locale: locale)
            .col-md-8
              = f.text_area :stories, :value => @shop.stories_translations[locale], :class => 'form-control', rows: 4, :maxLength => Rails.configuration.max_long_text_length
              %div.help-block.with-errors
        .form-group
          .row
            .col-md-4{ :title => I18n.t(:uniqueness_info, scope: :edit_shop, num: Rails.configuration.max_medium_text_length, locale: locale) }
              %i.fa.fa-info-circle{ :title => I18n.t(:uniqueness_info, scope: :edit_shop, num: Rails.configuration.max_medium_text_length, locale: locale) }
              %label.translation= I18n.t(:uniqueness, scope: :edit_shop, locale: locale)
            .col-md-8
              = f.text_area :uniqueness, :value => @shop.uniqueness_translations[locale], :class => 'form-control', rows: 4, :maxLength => Rails.configuration.max_medium_text_length
        .form-group
          .row
            .col-md-4{ :title => I18n.t(:german_essence_info, scope: :edit_shop, num: Rails.configuration.max_medium_text_length, locale: locale) }
              %i.fa.fa-info-circle{ :title => I18n.t(:german_essence_info, scope: :edit_shop, num: Rails.configuration.max_medium_text_length, locale: locale) }
              %label.translation= I18n.t(:german_essence, scope: :edit_shop, locale: locale)
            .col-md-8
              = f.text_area :german_essence, :value => @shop.german_essence_translations[locale], :class => 'form-control', rows: 4, :maxLength => Rails.configuration.max_medium_text_length
              %div.help-block.with-errors
        .form-group
          .row
            .col-md-4
              %label= I18n.t(:website, scope: :edit_shop)
            .col-md-8
              = f.text_field :website, :class => 'form-control', :maxLength => Rails.configuration.max_short_text_length, :placeholder => 'www.mydomain.com'
        .form-group
          .row
            .col-md-4
              %label.required= I18n.t(:tax_number, scope: :edit_shop, locale: locale)
            .col-md-8
              = f.text_field :tax_number, :class => 'form-control', :placeholder => 'z.B. 9181081508155', :required => true, :maxLength => Rails.configuration.max_tiny_text_length
              %div.help-block.with-errors
        .form-group
          .row
            .col-md-4{ :title => I18n.t(:ust_id_info, scope: :edit_shop, locale: locale) }
              %i.fa.fa-info-circle{ :title => I18n.t(:ust_id_info, scope: :edit_shop, locale: locale) }
              %label.required= I18n.t(:ustid, scope: :edit_shop, locale: locale)
            .col-md-8
              = f.text_field :ustid, :class => 'form-control', :placeholder => 'z.B. DE123456789', :required => true, :maxLength => Rails.configuration.max_tiny_text_length, :pattern => '^DE[0-9]{9,9}$'
              %div.help-block.with-errors
        .form-group
          .row
            .col-md-4{ :title => I18n.t(:eroi_number_info, scope: :edit_shop, locale: locale) }
              %i.fa.fa-info-circle{ :title => I18n.t(:eroi_number_info, scope: :edit_shop, locale: locale) }
              %label= I18n.t(:eroi, scope: :edit_shop, locale: locale)
            .col-md-8
              = f.text_field :eroi, :class => 'form-control', :placeholder => 'z.B. DE123456789', :maxLength => Rails.configuration.max_tiny_text_length, :pattern => '^DE[0-9]{9,9}$'
              %div.help-block.with-errors
    .panel.panel-info
      .panel-heading{ :title => I18n.t(:sales_channels_info, scope: :edit_shop, num: Rails.configuration.max_num_sales_channels, locale: locale) }
        .btn-toolbar{ :style => 'margin-left:22px' }
          %i.fa.fa-info-circle{ :title => I18n.t(:sales_channels_info, scope: :edit_shop, num: Rails.configuration.max_num_sales_channels, locale: locale) }
          %label= I18n.t(:sales_channels, scope: :edit_shop, locale: locale)
          .pull-right
            %a{:href => '#', :class=> 'btn btn-sm', :onclick => "#{gen_add_sales_channel('shop', I18n.t(:sales_channel, scope: :edit_shop, locale: locale), I18n.t(:remove_sales_channel, scope: :edit_shop, locale: locale), gen_sales_channel_select_options(locale))}", :id => "a_add_sales_channel_#{@shop.id}"}
              %i.fa.fa-plus-circle
              = I18n.t(:add_sales_channel, scope: :edit_shop, locale: locale)
      .panel-body
        - if @shop.sales_channels
          - @shop.sales_channels.each_slice(2) do |sck, scv|
            .form-group
              .row
                .col-md-4= select_tag 'shop[sales_channels][]', options_for_select(SalesChannelOptions::OPTIONS.map {|o| [I18n.t(o, scope: 'edit_shop.sales_channel_options', locale: locale), o]}, sck), :class => 'form-control'
                .col-md-6= text_field_tag 'shop[sales_channels][]', scv, :class => 'form-control', :placeholder => I18n.t(:sales_channel, scope: :edit_shop, locale: locale), :required => true
                .col-md-2
                  %a{ :href => '#', :class => 'btn', :onclick => "#{gen_remove_sales_channel}" }
                    %i.fa.fa-times-circle
                    =I18n.t(:remove_sales_channel, scope: :edit_shop, locale: locale)
    .panel.panel-info
      .panel-heading.text-center
        %h4= I18n.t(:contact_person_info, scope: :edit_shop_application)
      .panel-body
        .row
          .col-md-6
            .form-group
              = f.label :fname, I18n.t(:contact_fname, scope: :edit_shop_application), :class => 'required'
              = f.text_field :fname, :class => 'form-control', :maxLength => Rails.configuration.max_tiny_text_length, :required => true
          .col-md-6
            .form-group
              = f.label :lname, I18n.t(:contact_lname, scope: :edit_shop_application), :class => 'required'
              = f.text_field :lname, :class => 'form-control', :maxLength => Rails.configuration.max_tiny_text_length, :required => true
        .row
          .col-md-6
            .form-group
              = f.label :function, I18n.t(:contact_function, scope: :edit_shop_application)
              = f.text_field :function, :class => 'form-control', :maxLength => Rails.configuration.max_short_text_length
          .col-md-6
            .form-group
              = f.label :mail, I18n.t(:contact_email, scope: :edit_shop_application), :class => 'required'
              = f.email_field :mail, :class => 'form-control', :maxLength => Rails.configuration.max_short_text_length, :placeholder => 'example@google.com', :required => true
              %div.help-block.with-errors
        .row
          .col-md-6
            .form-group
              = f.label :tel, I18n.t(:contact_tel, scope: :edit_shop_application), :class => 'required'
              = f.text_field :tel, :class => 'form-control', :maxLength => Rails.configuration.max_tiny_text_length, :required => true, :pattern => '^(((((((00|\+)49[ \-/]?)|0)[1-9][0-9]{1,4})[ \-/]?)|((((00|\+)49\()|\(0)[1-9][0-9]{1,4}\)[ \-/]?))[0-9]{1,7}([ \-/]?[0-9]{1,5})?)$', :placeholder => '+49(89)123456'
              %div.help-block.with-errors
          .col-md-6
            .form-group
              = f.label :mobile, I18n.t(:contact_mobile, scope: :edit_shop_application)
              = f.text_field :mobile, :class => 'form-control', :maxLength => Rails.configuration.max_tiny_text_length, :pattern => '^(((((((00|\+)49[ \-/]?)|0)[1-9][0-9]{1,4})[ \-/]?)|((((00|\+)49\()|\(0)[1-9][0-9]{1,4}\)[ \-/]?))[0-9]{1,7}([ \-/]?[0-9]{1,5})?)$', :placeholder => '+49(176)64336650'
              %div.help-block.with-errors
    .panel.panel-info
      .panel-heading.text-center
        %label{:class => @shop.agb ? '' : 'required'}= I18n.t(:agb, scope: :edit_shop, locale: locale)
      .panel-body
        .form-group
          .row-fluid
            - if @shop && (not @shop.agb)
              = f.hidden_field :agb
              = f.check_box :agb, { :required => true }, true
              = I18n.t(:agb_statement, scope: :edit_shop, locale: locale).html_safe
            - else
              = f.check_box :agb, { :disabled => true }
              = I18n.t(:agb_statement, scope: :edit_shop, locale: locale).html_safe

    .panel.panel-info
      .panel-heading.text-center
        WireCard Payment Partnership
      .panel-body
        .form-group
          .row-fluid
            - if @shop.billing_address.nil?
              You must add a 
              = link_to "billing address", show_addresses_user_path
              to activate this section
            - else
              - if @shop.wirecard_status.nil?
                = link_to "Apply to WireCard now", apply_wirecard_shop_path, {class: "btn btn-danger"}
              - elsif @shop.wirecard_status == :active
                Your status was approved
              - elsif @shop.wirecard_status == :processing
                Your status is processing
              - elsif @shop.wirecard_status == :documents_complete
                Your documents are complete
              - elsif @shop.wirecard_status == :declined
                You were disapproved by WireCard
              - elsif @shop.wirecard_status == :terminated
                You were terminated by WireCard

  = f.button I18n.t(:save, scope: :edit_shop, locale: locale), :id => "edit_producer_submit_#{locale}", :class => 'btn btn-primary edit_producer_submit',  name: :user_info_edit_part, value: :edit_producer
