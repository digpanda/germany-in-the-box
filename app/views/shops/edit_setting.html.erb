<%= translation_js(:max_exceeded_message, :image_upload) %>
<%= translation_js(:ext_error_message, :image_upload) %>

<%= form_for @shop, :html => {:data => {:toggle => 'validator'}, role: 'form'} do |f| %>
  <div class="panel-group">
    <div class="panel panel-default">
      <div class="panel-body">
        <div class="row">
          <div class="col-md-4">
            <label>
              Logo oder Portr√§t
            </label>
          </div>
          <div class="col-md-8" title="<%= I18n.t(:banner_info, scope: :edit_shop) %>">
            <i class="fa fa-info-circle" title="<%= I18n.t(:banner_info, scope: :edit_shop) %>"></i>
            <label>
              Banner oder Cover
            </label>
          </div>
        </div>
        <div class="row text-center">
          <div class="col-md-4">
            <%= image_tag @shop.decorate.image_url(:logo, :thumb), :class => 'logo-img', :id => "logo_#{@shop.id}" %>
          </div>
          <div class="col-md-8">
            <%= image_tag @shop.decorate.image_url(:banner, :thumb), :style => 'max-width:auto;max-height:90px', :id => "banner_#{@shop.id}" %>
          </div>
        </div>
        <div class="row text-center">
          <div class="col-md-4">
            <div class="fileUpload btn btn-default">
              <span>
                <i class="fa fa-cloud-upload"></i>
                <%= I18n.t(:upload, scope: :image_upload) %>
              </span>
              <%= f.file_field :logo, :accept => "image/png, image/jpeg, image/jpg", :class => 'img-file-upload upload', :img_id => "#logo_#{@shop.id}" %>
            </div>
            <%= link_to I18n.t(:remove), shop_destroy_image_path(@shop, image_field: :logo), :method => :delete, :class => 'btn btn-default' %>
          </div>
          <div class="col-md-8">
            <div class="fileUpload btn btn-default">
              <span>
                <i class="fa fa-cloud-upload"></i>
                <%= I18n.t(:upload, scope: :image_upload) %>
              </span>
              <%= f.file_field :banner, :accept => "image/png, image/jpeg, image/jpg", :class => 'img-file-upload upload', :img_id => "#banner_#{@shop.id}" %>
            </div>
            <%= link_to I18n.t(:remove), shop_destroy_image_path(@shop, image_field: :banner), :method => :delete, :class => 'btn btn-default' %>
          </div>
        </div>
      </div>
    </div>
    <div class="panel panel-default">
      <div class="panel-body">

        <div class="form-group">
          <div class="pull-right required-info">
            <strong>
              <%= I18n.t(:required_field_info, scope: :edit_shop).html_safe %>
            </strong>
          </div>
          <br>
        </div>

        <div class="row">
          <div class="form-group">
            <div class="col-md-4">
              <strong>Shop URL</strong>
            </div>
            <div class="col-md-8">
              <%= text_field_tag :shop_url, shop_url(@shop), :class => 'form-control', :disabled => "disabled" %>
            </div>
          </div>
        </div>

        <br />

        <div class="row">
          <div class="form-group">
            <div class="col-md-4">
              <%= f.label :shopname, I18n.t(:shopname, scope: :edit_shop), :class => 'required' %>
            </div>
            <div class="col-md-8">
              <%= f.text_field :shopname, :class => 'form-control', :required => true, :maxLength => Rails.configuration.max_short_text_length %>
            </div>
          </div>
        </div>
        <br/>
        <div class="row">
          <div class="form-group">
            <div class="col-md-4" title="<%= I18n.t(:min_total_info, scope: :edit_shop) %>">
              <i class="fa fa-info-circle" title="<%= I18n.t(:min_total_info, scope: :edit_shop) %>"></i>
              <%= f.label :min_total, I18n.t(:min_total, scope: :edit_shop), :class => 'required' %>
            </div>
            <div class="col-md-8">
              <div class="input-group">
                <%= f.text_field :min_total, value: number_with_precision(@shop.min_total ? @shop.min_total : 0, :precision => 2), :class => 'form-control', :required => true, :pattern => I18n.t(:positive_float_equal_or_greater_than_0, scope: :validation) %>
                <span class="input-group-addon">
                  <%= @shop.currency.code %>
                </span>
              </div>
            </div>
          </div>
        </div>
        <% if current_user.decorate.admin? %>
            <br/>
            <div class="row">
              <div class="form-group">
                <div class="col-md-4">
                  <%= f.label :bg_merchant_id, I18n.t(:bg_merchant_id, scope: :edit_shop), :class => 'required' %>
                </div>
                <div class="col-md-8">
                  <%= f.text_field :bg_merchant_id, :class => 'form-control', :required => true, scope: :validation %>
                </div>
              </div>
            </div>
        <% end %>
      </div>
    </div>
    <div class="panel panel-info">
      <div class="panel-heading" title="<%= I18n.t(:shop_seal_info, scope: :edit_shop) %>">
        <div class="text-center">
          <i class="fa fa-info-circle" title="<%= I18n.t(:shop_seal_info, scope: :edit_shop) %>"></i>
          <label>
            <%= I18n.t(:shop_seal, scope: :edit_shop) %>
          </label>
        </div>
      </div>
      <div class="panel-body">
        <%= render partial: "shop_edit_images", :locals => {form: f, shop: @shop, image_fields: [:seal0, :seal1, :seal2, :seal3]} %>
      </div>
    </div>
    <div class="panel panel-info">
      <div class="panel-heading" title="<%= I18n.t(:product_seal_info, scope: :edit_product) %>">
        <div class="text-center">
          <i class="fa fa-info-circle" title="<%= I18n.t(:product_seal_info, scope: :edit_product) %>"></i>
          <label>
            <%= I18n.t(:product_seal, scope: :edit_product) %>
          </label>
        </div>
      </div>
      <div class="panel-body">
        <%= render partial: "shop_edit_images", :locals => {form: f, shop: @shop, image_fields: [:seal4, :seal5, :seal6, :seal7]} %>
      </div>
    </div>
  </div>
  <%= f.button I18n.t(:save, scope: :edit_shop), :class => 'btn btn-primary', name: :user_info_edit_part, value: :edit_shop %>
<% end %>
