<!-- TODO : This was taken and changed in _order_items.erb ; we might need to change the methodology with @readonly, etc. -->
<div class="+small-spacer"></div>
<div class="row +overflow">
  <table class="white-table">
    <thead>
      <tr>
        <th>
          <%= I18n.t(:item, scope: :cart) %>
        </th>
        <th>
          <%= I18n.t(:name, scope: :cart) %>
        </th>
        <th>
          <%= I18n.t(:variant_option, scope: :cart) %>
        </th>
        <th>
          <%= I18n.t(:quantity, scope: :cart) %>
        </th>
        <th>
          <%= I18n.t(:unit_price, scope: :cart) %>
        </th>
        <% unless @readonly %>
        <th>
          <%= I18n.t(:operations, scope: :cart) %>
        </th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% order.order_items.each do |order_item| %>
      <tr>
        <td class="cart-item-image">
          <a href="<%= guest_product_path(order_item.product) %>">
            <img src="<%= order_item.sku.decorate.image_url(:img0, :thumb) %>" class="icon-img"/>
          </a>
        </td>
        <td>
          <a href="<%= guest_product_path(order_item.product) %>">
            <%= order_item.product.name %>
          </a>
        </td>
        <td>
          <%= select_tag :option_ids, grouped_options_for_select(order_item.product.decorate.grouped_variants_options, order_item.option_ids), {:multiple => 'multiple', :class => 'sku-variants-options'} %>
        </td>
        <td class="white-table__quantity">

          <!-- Minus -->
          <% unless @readonly %>
          <a href="#" class="js-set-quantity-minus" data-order-item-id="<%= order_item.id.to_s %>" data-order-shop-id="<%= order.shop.id %>">
            <i class="fa fa-minus buttons buttons__quantity"></i>
          </a>
          <% end %>

          <%= text_field_tag "", order_item.quantity, :id => "order-item-quantity-#{order_item.id.to_s}", :type => 'text', :value => "#{order_item.quantity}", :disabled => "disabled", :data => { :order_item_id => order_item.id.to_s } %>

          <!-- Plus -->
          <% unless @readonly %>
          <a href="#" class="js-set-quantity-plus" data-order-item-id="<%= order_item.id.to_s %>" data-order-shop-id="<%= order.shop.id %>">
            <i class="fa fa-plus buttons buttons__quantity"></i>
          </a>
          <% end %>

        </td>
        <td>
          <%= order_item.price_with_taxes.in_euro.to_yuan.display %>
          <% if order_item.sku.discount > 0 %>
          <span class="+discount"><%= order_item.sku.decorate.discount_with_percent %></span>
          <% end %>
        </td>
        <% unless @readonly %>
        <td>

          <%= link_to '', guest_order_item_path(order_item), method: :delete, data: { confirm: I18n.t(:delete_sku_msg, :scope => :cart)  }, "data-placement" => "right",  class: 'fa fa-times buttons buttons__delete' %>

        </td>
        <% end %>
      </tr>
      <% end %>
    </tbody>
  </table>
</div>
<% unless @readonly %>
<div class="row">
  <div class="col-xs-10 col-xs-push-1 col-xs-pull-1 col-md-12 col-md-push-0 col-md-pull-0">
    <%= render partial: 'customer/cart/show/checkout_button', :locals => { :order => order } %>
  </div>
</div>
<% end %>
